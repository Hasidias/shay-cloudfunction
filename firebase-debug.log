[debug] [2025-05-20T03:19:50.017Z] ----------------------------------------------------------------------
[debug] [2025-05-20T03:19:50.022Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions:trackWebhookEvents
[debug] [2025-05-20T03:19:50.023Z] CLI Version:   14.4.0
[debug] [2025-05-20T03:19:50.023Z] Platform:      win32
[debug] [2025-05-20T03:19:50.024Z] Node Version:  v22.13.1
[debug] [2025-05-20T03:19:50.025Z] Time:          Tue May 20 2025 08:49:50 GMT+0530 (India Standard Time)
[debug] [2025-05-20T03:19:50.025Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-05-20T03:19:50.256Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-20T03:19:50.256Z] > authorizing via signed-in user (lakmaldias12@gmail.com)
[debug] [2025-05-20T03:19:50.257Z] [iam] checking project shay-subscription-analytic for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-05-20T03:19:50.258Z] Checked if tokens are valid: false, expires at: 1747644151867
[debug] [2025-05-20T03:19:50.258Z] Checked if tokens are valid: false, expires at: 1747644151867
[debug] [2025-05-20T03:19:50.259Z] > refreshing access token with scopes: []
[debug] [2025-05-20T03:19:50.262Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-05-20T03:19:50.262Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-05-20T03:19:50.725Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-05-20T03:19:50.725Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-05-20T03:19:50.742Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions [none]
[debug] [2025-05-20T03:19:50.742Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:19:50.742Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-20T03:19:51.917Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions 200
[debug] [2025-05-20T03:19:51.917Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-20T03:19:51.918Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:19:51.918Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:19:51.918Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-05-20T03:19:51.918Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-05-20T03:19:53.394Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-05-20T03:19:53.394Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'shay-subscription-analytic'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-05-20T03:20:03.635Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:03.635Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:03.636Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-05-20T03:20:03.636Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:05.184Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com 200
[debug] [2025-05-20T03:20:05.184Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-05-20T03:20:05.184Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:05.184Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:05.184Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic [none]
[debug] [2025-05-20T03:20:06.374Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic 200
[debug] [2025-05-20T03:20:06.374Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic {"projectNumber":"831418024504","projectId":"shay-subscription-analytic","lifecycleState":"ACTIVE","name":"shay-subscription-analytic","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-19T03:46:29.282347Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:06.381Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:06.381Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:06.381Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:06.381Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:06.382Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:06.382Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:06.383Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:06.383Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:06.383Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com [none]
[debug] [2025-05-20T03:20:06.383Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:06.384Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com [none]
[debug] [2025-05-20T03:20:06.384Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:06.388Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com [none]
[debug] [2025-05-20T03:20:06.388Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:06.391Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com [none]
[debug] [2025-05-20T03:20:06.392Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:07.790Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com 200
[debug] [2025-05-20T03:20:07.790Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-05-20T03:20:07.801Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com 200
[debug] [2025-05-20T03:20:07.801Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-05-20T03:20:07.848Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com 200
[debug] [2025-05-20T03:20:07.848Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-05-20T03:20:07.851Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com 200
[debug] [2025-05-20T03:20:07.851Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-05-20T03:20:07.852Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:07.852Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:07.853Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/shay-subscription-analytic/adminSdkConfig [none]
[debug] [2025-05-20T03:20:09.429Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/shay-subscription-analytic/adminSdkConfig 200
[debug] [2025-05-20T03:20:09.429Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/shay-subscription-analytic/adminSdkConfig {"projectId":"shay-subscription-analytic","storageBucket":"shay-subscription-analytic.firebasestorage.app"}
[debug] [2025-05-20T03:20:09.430Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:09.430Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:09.430Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/shay-subscription-analytic/configs [none]
[debug] [2025-05-20T03:20:09.935Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/shay-subscription-analytic/configs 200
[debug] [2025-05-20T03:20:09.936Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/shay-subscription-analytic/configs {}
[debug] [2025-05-20T03:20:09.939Z] Validating nodejs source
[debug] [2025-05-20T03:20:11.146Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^13.4.0",
    "firebase-functions": "^6.3.2"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.1.3"
  },
  "private": true
}
[debug] [2025-05-20T03:20:11.146Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-05-20T03:20:11.148Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-05-20T03:20:11.167Z] Found firebase-functions binary at 'E:\Fiver\Orders\google analytic cloud function\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8520

[error] (node:15748) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-05-20T03:20:12.269Z] Got response from /__/functions.yaml {"endpoints":{"trackWebhookEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"kRcWebhookEventsCollection/{id}"},"retry":false},"entryPoint":"trackWebhookEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:16.321Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:16.321Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:16.321Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com [none]
[debug] [2025-05-20T03:20:16.321Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:17.826Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com 200
[debug] [2025-05-20T03:20:17.826Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-05-20T03:20:17.827Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-20T03:20:17.827Z] > authorizing via signed-in user (lakmaldias12@gmail.com)
[debug] [2025-05-20T03:20:17.827Z] [iam] checking project shay-subscription-analytic for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-05-20T03:20:17.827Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:17.828Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:17.828Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions [none]
[debug] [2025-05-20T03:20:17.828Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:17.828Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-05-20T03:20:19.011Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions 200
[debug] [2025-05-20T03:20:19.011Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-05-20T03:20:19.012Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:19.012Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:19.013Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/shay-subscription-analytic/instances pageSize=100&pageToken=
[debug] [2025-05-20T03:20:20.484Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/shay-subscription-analytic/instances 200
[debug] [2025-05-20T03:20:20.484Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/shay-subscription-analytic/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged E:\Fiver\Orders\google analytic cloud function\functions (62.22 KB) for uploading 
[debug] [2025-05-20T03:20:20.559Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:20.560Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:20.560Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/shay-subscription-analytic/locations/-/functions [none]
[debug] [2025-05-20T03:20:21.500Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/shay-subscription-analytic/locations/-/functions 200
[debug] [2025-05-20T03:20:21.500Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/shay-subscription-analytic/locations/-/functions {}
[debug] [2025-05-20T03:20:21.501Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:21.501Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:21.501Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-05-20T03:20:23.206Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/-/functions 200
[debug] [2025-05-20T03:20:23.206Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/-/functions {"functions":[{"name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"build":"projects/831418024504/locations/us-central1/builds/738db1f0-6d9f-4af4-a260-794ae89cb890","runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-790910","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"rc-webhook-events/{id}","operator":"match-path-pattern"}],"pubsubTopic":"projects/shay-subscription-analytic/topics/eventarc-nam5-trackwebhookevents-790910-060","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-05-19T13:31:00.790019773Z","labels":{"firebase-functions-hash":"8898c8039eaf04c4e9f59f6404da401d4942c45f","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","createTime":"2025-05-19T10:38:19.692727963Z","satisfiesPzi":true}]}
[debug] [2025-05-20T03:20:23.209Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:23.209Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:23.210Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/shay-subscription-analytic/databases/(default) [none]
[debug] [2025-05-20T03:20:24.677Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/shay-subscription-analytic/databases/(default) 200
[debug] [2025-05-20T03:20:24.677Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/shay-subscription-analytic/databases/(default) {"name":"projects/shay-subscription-analytic/databases/(default)","uid":"ca3ca987-0f89-4e4d-a2e2-bb934598785a","createTime":"2025-05-19T03:59:52.951092Z","updateTime":"2025-05-19T03:59:52.951092Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-05-20T02:20:24.567918Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"etag":"INOt19WLsY0DMKnF1YzUro0D"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:24.681Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:24.681Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:24.682Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:24.682Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:24.682Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:24.682Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-05-20T03:20:24.683Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:24.683Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:24.683Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com [none]
[debug] [2025-05-20T03:20:24.683Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:20:24.686Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com [none]
[debug] [2025-05-20T03:20:24.686Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:20:24.688Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com [none]
[debug] [2025-05-20T03:20:24.688Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:20:24.690Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com [none]
[debug] [2025-05-20T03:20:24.690Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:20:26.223Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com 200
[debug] [2025-05-20T03:20:26.224Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[debug] [2025-05-20T03:20:26.227Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com 200
[debug] [2025-05-20T03:20:26.227Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-05-20T03:20:26.228Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com 200
[debug] [2025-05-20T03:20:26.228Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-05-20T03:20:26.230Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com 200
[debug] [2025-05-20T03:20:26.230Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-05-20T03:20:26.234Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:26.234Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-05-20T03:20:26.234Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:26.234Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:26.235Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-05-20T03:20:26.235Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-05-20T03:20:26.750Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-05-20T03:20:26.750Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-831418024504@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"104094222085622943943"}}
[debug] [2025-05-20T03:20:27.776Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-05-20T03:20:27.776Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-831418024504@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"103794396729619015861"}}
[debug] [2025-05-20T03:20:27.780Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:27.780Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:27.780Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-05-20T03:20:27.781Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:20:28.166Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com 200
[debug] [2025-05-20T03:20:28.166Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-05-20T03:20:28.166Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:28.166Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:28.166Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic [none]
[debug] [2025-05-20T03:20:29.395Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic 200
[debug] [2025-05-20T03:20:29.396Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic {"projectNumber":"831418024504","projectId":"shay-subscription-analytic","lifecycleState":"ACTIVE","name":"shay-subscription-analytic","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-19T03:46:29.282347Z"}
[debug] [2025-05-20T03:20:29.396Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:29.396Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:29.397Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/831418024504 [none]
[debug] [2025-05-20T03:20:29.846Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/831418024504 403
[debug] [2025-05-20T03:20:29.846Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/831418024504 {"error":{"code":403,"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504","containerInfo":"831418024504","service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/831418024504"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504"}]}]}}
[debug] [2025-05-20T03:20:29.847Z] unable to look up default compute service account. Falling back to 831418024504-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504","containerInfo":"831418024504","service":"compute.googleapis.com","serviceTitle":"Compute Engine API","consumer":"projects/831418024504"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/831418024504 had HTTP Error: 403, Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-05-20T03:20:29.849Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:29.849Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:29.849Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/shay-subscription-analytic/billingInfo [none]
[debug] [2025-05-20T03:20:31.312Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/shay-subscription-analytic/billingInfo 200
[debug] [2025-05-20T03:20:31.312Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/shay-subscription-analytic/billingInfo {"name":"projects/shay-subscription-analytic/billingInfo","projectId":"shay-subscription-analytic","billingAccountName":"billingAccounts/0141F0-C63415-ACA65E","billingEnabled":true}
[debug] [2025-05-20T03:20:31.314Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:31.314Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:31.314Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-05-20T03:20:32.875Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-05-20T03:20:32.875Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/1ab55f07-7965-4086-af48-41848e439749.zip?GoogleAccessId=service-831418024504@gcf-admin-robot.iam.gserviceaccount.com&Expires=1747713032&Signature=SwtKcCnaJgNamcyujSze%2BvUMcT5lrAD4G4emfEuZI7m1TTC99v0eegq9yfNvu2Bq316N3MYkEE3WkjLQtD93zc7pz8Xvw0u9U4OH08un5Qio3k7HeVcjtWLJ130bYyY56rpq0y3CTLEExBaAuAfiqGZl%2FOOw2FaV5h3aGFKb8mOZXSUvH6uhxsR5TcV0y7hJ7yPQ7f05glyqdteL91w%2F9UU67SdHStaSuS8YTXS2XkRhVOimFJBtZ3yxQaRQLQgGYfvA4C3zZMgBBfEJqMOpvHXABC6y63xigNwNumHiUUH1tRWouCfqCi%2Bko%2Bqs4HjaEuxs22kLNvzsqSFj%2FPImLA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com","object":"1ab55f07-7965-4086-af48-41848e439749.zip"}}
[debug] [2025-05-20T03:20:32.876Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/1ab55f07-7965-4086-af48-41848e439749.zip GoogleAccessId=service-831418024504%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1747713032&Signature=SwtKcCnaJgNamcyujSze%2BvUMcT5lrAD4G4emfEuZI7m1TTC99v0eegq9yfNvu2Bq316N3MYkEE3WkjLQtD93zc7pz8Xvw0u9U4OH08un5Qio3k7HeVcjtWLJ130bYyY56rpq0y3CTLEExBaAuAfiqGZl%2FOOw2FaV5h3aGFKb8mOZXSUvH6uhxsR5TcV0y7hJ7yPQ7f05glyqdteL91w%2F9UU67SdHStaSuS8YTXS2XkRhVOimFJBtZ3yxQaRQLQgGYfvA4C3zZMgBBfEJqMOpvHXABC6y63xigNwNumHiUUH1tRWouCfqCi%2Bko%2Bqs4HjaEuxs22kLNvzsqSFj%2FPImLA%3D%3D
[debug] [2025-05-20T03:20:32.876Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/1ab55f07-7965-4086-af48-41848e439749.zip [stream]
[debug] [2025-05-20T03:20:34.879Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/1ab55f07-7965-4086-af48-41848e439749.zip 200
[debug] [2025-05-20T03:20:34.880Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/1ab55f07-7965-4086-af48-41848e439749.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 22 (2nd Gen) function trackWebhookEvents(us-central1)... 
[debug] [2025-05-20T03:20:34.889Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:34.889Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:34.889Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion
[debug] [2025-05-20T03:20:34.889Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents {"name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com","object":"1ab55f07-7965-4086-af48-41848e439749.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-05-20T03:20:37.143Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents 200
[debug] [2025-05-20T03:20:37.143Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-05-20T03:20:37.144Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:37.145Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:37.145Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:20:38.415Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:20:38.415Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:20:38.932Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:20:38.932Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:38.932Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:38.933Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:20:40.312Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:20:40.312Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:20:41.316Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:20:41.317Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:41.317Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:41.317Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:20:42.618Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:20:42.618Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:20:44.624Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:20:44.625Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:44.625Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:44.625Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:20:45.981Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:20:45.981Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:20:49.983Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:20:49.984Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:49.984Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:49.984Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:20:51.307Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:20:51.307Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:20:59.322Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:20:59.323Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:59.323Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:20:59.323Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:21:00.831Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:21:00.831Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:21:10.832Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:21:10.833Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:10.833Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:10.833Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:21:12.299Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:21:12.300Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:21:22.314Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:21:22.315Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:22.315Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:22.315Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:21:23.769Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:21:23.769Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/0fc33e45-a790-4289-88c2-60c65b582534"},"done":false}
[debug] [2025-05-20T03:21:33.785Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:21:33.786Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:33.786Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:33.786Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb [none]
[debug] [2025-05-20T03:21:35.187Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb 200
[debug] [2025-05-20T03:21:35.187Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711236054-63588bb651c5e-a0cf3dc7-165887eb","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:20:37.017836020Z","endTime":"2025-05-20T03:21:29.365804778Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711236971777"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-224421","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: jest@29.7.0 from lock file\nnpm error Missing: @jest/core@29.7.0 from lock file\nnpm error Missing: @jest/types@29.6.3 from lock file\nnpm error Missing: import-local@3.2.0 from lock file\nnpm error Missing: jest-cli@29.7.0 from lock file\nnpm error Missing: @jest/console@29.7.0 from lock file\nnpm error Missing: @jest/reporters@29.7.0 from lock file\nnpm error Missing: @jest/test-result@29.7.0 from lock file\nnpm error Missing: @jest/transform@29.7.0 from lock file\nnpm error Missing: ansi-escapes@4.3.2 from lock file\nnpm error Missing: ci-info@3.9.0 from lock file\nnpm error Missing: exit@0.1.2 from lock file\nnpm error Missing: graceful-fs@4.2.11 from lock file\nnpm error Missing: jest-changed-files@29.7.0 from lock file\nnpm error Missing: jest-config@29.7.0 from lock file\nnpm error Missing: jest-haste-map@29.7.0 from lock file\nnpm error Missing: jest-message-util@29.7.0 from lock file\nnpm error Missing: jest-regex-util@29.6.3 from lock file\nnpm error Missing: jest-resolve@29.7.0 from lock file\nnpm error Missing: jest-resolve-dependencies@29.7.0 from lock file\nnpm error Missing: jest-runner@29.7.0 from lock file\nnpm error Missing: jest-runtime@29.7.0 from lock file\nnpm error Missing: jest-snapshot@29.7.0 from lock file\nnpm error Missing: jest-util@29.7.0 from lock file\nnpm error Missing: jest-validate@29.7.0 from lock file\nnpm error Missing: jest-watcher@29.7.0 from lock file\nnpm error Missing: pretty-format@29.7.0 from lock file\nnpm error Missing: @bcoe/v8-coverage@0.2.3 from lock file\nnpm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file\nnpm error Missing: collect-v8-coverage@1.0.2 from lock file\nnpm error Missing: istanbul-lib-coverage@3.2.2 from lock file\nnpm error Missing: istanbul-lib-instrument@6.0.3 from lock file\nnpm error Missing: istanbul-lib-report@3.0.1 from lock file\nnpm error Missing: istanbul-lib-source-maps@4.0.1 from lock file\nnpm error Missing: istanbul-reports@3.1.7 from lock file\nnpm error Missing: jest-worker@29.7.0 from lock file\nnpm error Missing: string-length@4.0.2 from lock file\nnpm error Missing: v8-to-istanbul@9.3.0 from lock file\nnpm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file\nnpm error Missing: @babel/core@7.27.1 from lock file\nnpm error Missing: babel-plugin-istanbul@6.1.1 from lock file\nnpm error Missing: convert-source-map@2.0.0 from lock file\nnpm error Missing: pirates@4.0.7 from lock file\nnpm error Missing: write-file-atomic@4.0.2 from lock file\nnpm error Missing: @ampproject/remapping@2.3.0 from lock file\nnpm error Missing: @babel/code-frame@7.27.1 from lock file\nnpm error Missing: @babel/generator@7.27.1 from lock file\nnpm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file\nnpm error Missing: @babel/helper-module-transforms@7.27.1 from lock file\nnpm error Missing: @babel/helpers@7.27.1 from lock file\nnpm error Missing: @babel/parser@7.27.2 from lock file\nnpm error Missing: @babel/template@7.27.2 from lock file\nnpm error Missing: @babel/traverse@7.27.1 from lock file\nnpm error Missing: @babel/types@7.27.1 from lock file\nnpm error Missing: gensync@1.0.0-beta.2 from lock file\nnpm error Missing: json5@2.2.3 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file\nnpm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file\nnpm error Missing: js-tokens@4.0.0 from lock file\nnpm error Missing: picocolors@1.1.1 from lock file\nnpm error Missing: jsesc@3.1.0 from lock file\nnpm error Missing: @babel/compat-data@7.27.2 from lock file\nnpm error Missing: @babel/helper-validator-option@7.27.1 from lock file\nnpm error Missing: browserslist@4.24.5 from lock file\nnpm error Missing: lru-cache@5.1.1 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @babel/helper-module-imports@7.27.1 from lock file\nnpm error Missing: globals@11.12.0 from lock file\nnpm error Missing: @babel/helper-string-parser@7.27.1 from lock file\nnpm error Missing: @jest/schemas@29.6.3 from lock file\nnpm error Missing: @types/istanbul-reports@3.0.4 from lock file\nnpm error Missing: @types/yargs@17.0.33 from lock file\nnpm error Missing: @sinclair/typebox@0.27.8 from lock file\nnpm error Missing: @jridgewell/set-array@1.2.1 from lock file\nnpm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file\nnpm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file\nnpm error Missing: @types/istanbul-lib-report@3.0.3 from lock file\nnpm error Missing: @types/yargs-parser@21.0.3 from lock file\nnpm error Missing: type-fest@0.21.3 from lock file\nnpm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file\nnpm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file\nnpm error Missing: @istanbuljs/schema@0.1.3 from lock file\nnpm error Missing: istanbul-lib-instrument@5.2.1 from lock file\nnpm error Missing: test-exclude@6.0.0 from lock file\nnpm error Missing: camelcase@5.3.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: get-package-type@0.1.0 from lock file\nnpm error Missing: js-yaml@3.14.1 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: caniuse-lite@1.0.30001718 from lock file\nnpm error Missing: electron-to-chromium@1.5.155 from lock file\nnpm error Missing: node-releases@2.0.19 from lock file\nnpm error Missing: update-browserslist-db@1.1.3 from lock file\nnpm error Missing: pkg-dir@4.2.0 from lock file\nnpm error Missing: resolve-cwd@3.0.0 from lock file\nnpm error Missing: make-dir@4.0.0 from lock file\nnpm error Missing: source-map@0.6.1 from lock file\nnpm error Missing: html-escaper@2.0.2 from lock file\nnpm error Missing: execa@5.1.1 from lock file\nnpm error Missing: get-stream@6.0.1 from lock file\nnpm error Missing: human-signals@2.1.0 from lock file\nnpm error Missing: merge-stream@2.0.0 from lock file\nnpm error Missing: npm-run-path@4.0.1 from lock file\nnpm error Missing: onetime@5.1.2 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: strip-final-newline@2.0.0 from lock file\nnpm error Missing: create-jest@29.7.0 from lock file\nnpm error Missing: prompts@2.4.2 from lock file\nnpm error Missing: @jest/test-sequencer@29.7.0 from lock file\nnpm error Missing: babel-jest@29.7.0 from lock file\nnpm error Missing: deepmerge@4.3.1 from lock file\nnpm error Missing: jest-circus@29.7.0 from lock file\nnpm error Missing: jest-environment-node@29.7.0 from lock file\nnpm error Missing: jest-get-type@29.6.3 from lock file\nnpm error Missing: parse-json@5.2.0 from lock file\nnpm error Missing: @types/babel__core@7.20.5 from lock file\nnpm error Missing: babel-preset-jest@29.6.3 from lock file\nnpm error Missing: @types/babel__generator@7.27.0 from lock file\nnpm error Missing: @types/babel__template@7.4.4 from lock file\nnpm error Missing: @types/babel__traverse@7.20.7 from lock file\nnpm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file\nnpm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file\nnpm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file\nnpm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file\nnpm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file\nnpm error Missing: @jest/environment@29.7.0 from lock file\nnpm error Missing: @jest/expect@29.7.0 from lock file\nnpm error Missing: co@4.6.0 from lock file\nnpm error Missing: dedent@1.6.0 from lock file\nnpm error Missing: is-generator-fn@2.1.0 from lock file\nnpm error Missing: jest-each@29.7.0 from lock file\nnpm error Missing: jest-matcher-utils@29.7.0 from lock file\nnpm error Missing: pure-rand@6.1.0 from lock file\nnpm error Missing: stack-utils@2.0.6 from lock file\nnpm error Missing: @jest/fake-timers@29.7.0 from lock file\nnpm error Missing: jest-mock@29.7.0 from lock file\nnpm error Missing: expect@29.7.0 from lock file\nnpm error Missing: @sinonjs/fake-timers@10.3.0 from lock file\nnpm error Missing: @sinonjs/commons@3.0.1 from lock file\nnpm error Missing: type-detect@4.0.8 from lock file\nnpm error Missing: @jest/expect-utils@29.7.0 from lock file\nnpm error Missing: @types/graceful-fs@4.1.9 from lock file\nnpm error Missing: anymatch@3.1.3 from lock file\nnpm error Missing: fb-watchman@2.0.2 from lock file\nnpm error Missing: fsevents@2.3.3 from lock file\nnpm error Missing: walker@1.0.8 from lock file\nnpm error Missing: normalize-path@3.0.0 from lock file\nnpm error Missing: bser@2.1.1 from lock file\nnpm error Missing: node-int64@0.4.0 from lock file\nnpm error Missing: jest-diff@29.7.0 from lock file\nnpm error Missing: diff-sequences@29.6.3 from lock file\nnpm error Missing: @types/stack-utils@2.0.3 from lock file\nnpm error Missing: jest-pnp-resolver@1.2.3 from lock file\nnpm error Missing: resolve.exports@2.0.3 from lock file\nnpm error Missing: emittery@0.13.1 from lock file\nnpm error Missing: jest-docblock@29.7.0 from lock file\nnpm error Missing: jest-leak-detector@29.7.0 from lock file\nnpm error Missing: source-map-support@0.5.13 from lock file\nnpm error Missing: detect-newline@3.1.0 from lock file\nnpm error Missing: @jest/globals@29.7.0 from lock file\nnpm error Missing: @jest/source-map@29.6.3 from lock file\nnpm error Missing: cjs-module-lexer@1.4.3 from lock file\nnpm error Missing: strip-bom@4.0.0 from lock file\nnpm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: leven@3.1.0 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: mimic-fn@2.1.0 from lock file\nnpm error Missing: error-ex@1.3.2 from lock file\nnpm error Missing: json-parse-even-better-errors@2.3.1 from lock file\nnpm error Missing: lines-and-columns@1.2.4 from lock file\nnpm error Missing: is-arrayish@0.2.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: ansi-styles@5.2.0 from lock file\nnpm error Missing: react-is@18.3.1 from lock file\nnpm error Missing: kleur@3.0.3 from lock file\nnpm error Missing: sisteransi@1.0.5 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: buffer-from@1.1.2 from lock file\nnpm error Missing: escape-string-regexp@2.0.0 from lock file\nnpm error Missing: char-regex@1.0.2 from lock file\nnpm error Missing: makeerror@1.0.12 from lock file\nnpm error Missing: tmpl@1.0.5 from lock file\nnpm error Missing: yallist@3.1.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: argparse@1.0.10 from lock file\nnpm error Missing: esprima@4.0.1 from lock file\nnpm error Missing: sprintf-js@1.0.3 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error Missing: p-try@2.2.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_21_05_080Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504."}}
[debug] [2025-05-20T03:21:35.188Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm error code EUSAGE
npm error
npm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
npm error
npm error Missing: jest@29.7.0 from lock file
npm error Missing: @jest/core@29.7.0 from lock file
npm error Missing: @jest/types@29.6.3 from lock file
npm error Missing: import-local@3.2.0 from lock file
npm error Missing: jest-cli@29.7.0 from lock file
npm error Missing: @jest/console@29.7.0 from lock file
npm error Missing: @jest/reporters@29.7.0 from lock file
npm error Missing: @jest/test-result@29.7.0 from lock file
npm error Missing: @jest/transform@29.7.0 from lock file
npm error Missing: ansi-escapes@4.3.2 from lock file
npm error Missing: ci-info@3.9.0 from lock file
npm error Missing: exit@0.1.2 from lock file
npm error Missing: graceful-fs@4.2.11 from lock file
npm error Missing: jest-changed-files@29.7.0 from lock file
npm error Missing: jest-config@29.7.0 from lock file
npm error Missing: jest-haste-map@29.7.0 from lock file
npm error Missing: jest-message-util@29.7.0 from lock file
npm error Missing: jest-regex-util@29.6.3 from lock file
npm error Missing: jest-resolve@29.7.0 from lock file
npm error Missing: jest-resolve-dependencies@29.7.0 from lock file
npm error Missing: jest-runner@29.7.0 from lock file
npm error Missing: jest-runtime@29.7.0 from lock file
npm error Missing: jest-snapshot@29.7.0 from lock file
npm error Missing: jest-util@29.7.0 from lock file
npm error Missing: jest-validate@29.7.0 from lock file
npm error Missing: jest-watcher@29.7.0 from lock file
npm error Missing: pretty-format@29.7.0 from lock file
npm error Missing: @bcoe/v8-coverage@0.2.3 from lock file
npm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file
npm error Missing: collect-v8-coverage@1.0.2 from lock file
npm error Missing: istanbul-lib-coverage@3.2.2 from lock file
npm error Missing: istanbul-lib-instrument@6.0.3 from lock file
npm error Missing: istanbul-lib-report@3.0.1 from lock file
npm error Missing: istanbul-lib-source-maps@4.0.1 from lock file
npm error Missing: istanbul-reports@3.1.7 from lock file
npm error Missing: jest-worker@29.7.0 from lock file
npm error Missing: string-length@4.0.2 from lock file
npm error Missing: v8-to-istanbul@9.3.0 from lock file
npm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file
npm error Missing: @babel/core@7.27.1 from lock file
npm error Missing: babel-plugin-istanbul@6.1.1 from lock file
npm error Missing: convert-source-map@2.0.0 from lock file
npm error Missing: pirates@4.0.7 from lock file
npm error Missing: write-file-atomic@4.0.2 from lock file
npm error Missing: @ampproject/remapping@2.3.0 from lock file
npm error Missing: @babel/code-frame@7.27.1 from lock file
npm error Missing: @babel/generator@7.27.1 from lock file
npm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file
npm error Missing: @babel/helper-module-transforms@7.27.1 from lock file
npm error Missing: @babel/helpers@7.27.1 from lock file
npm error Missing: @babel/parser@7.27.2 from lock file
npm error Missing: @babel/template@7.27.2 from lock file
npm error Missing: @babel/traverse@7.27.1 from lock file
npm error Missing: @babel/types@7.27.1 from lock file
npm error Missing: gensync@1.0.0-beta.2 from lock file
npm error Missing: json5@2.2.3 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file
npm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file
npm error Missing: js-tokens@4.0.0 from lock file
npm error Missing: picocolors@1.1.1 from lock file
npm error Missing: jsesc@3.1.0 from lock file
npm error Missing: @babel/compat-data@7.27.2 from lock file
npm error Missing: @babel/helper-validator-option@7.27.1 from lock file
npm error Missing: browserslist@4.24.5 from lock file
npm error Missing: lru-cache@5.1.1 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: @babel/helper-module-imports@7.27.1 from lock file
npm error Missing: globals@11.12.0 from lock file
npm error Missing: @babel/helper-string-parser@7.27.1 from lock file
npm error Missing: @jest/schemas@29.6.3 from lock file
npm error Missing: @types/istanbul-reports@3.0.4 from lock file
npm error Missing: @types/yargs@17.0.33 from lock file
npm error Missing: @sinclair/typebox@0.27.8 from lock file
npm error Missing: @jridgewell/set-array@1.2.1 from lock file
npm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file
npm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file
npm error Missing: @types/istanbul-lib-report@3.0.3 from lock file
npm error Missing: @types/yargs-parser@21.0.3 from lock file
npm error Missing: type-fest@0.21.3 from lock file
npm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file
npm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file
npm error Missing: @istanbuljs/schema@0.1.3 from lock file
npm error Missing: istanbul-lib-instrument@5.2.1 from lock file
npm error Missing: test-exclude@6.0.0 from lock file
npm error Missing: camelcase@5.3.1 from lock file
npm error Missing: find-up@4.1.0 from lock file
npm error Missing: get-package-type@0.1.0 from lock file
npm error Missing: js-yaml@3.14.1 from lock file
npm error Missing: resolve-from@5.0.0 from lock file
npm error Missing: caniuse-lite@1.0.30001718 from lock file
npm error Missing: electron-to-chromium@1.5.155 from lock file
npm error Missing: node-releases@2.0.19 from lock file
npm error Missing: update-browserslist-db@1.1.3 from lock file
npm error Missing: pkg-dir@4.2.0 from lock file
npm error Missing: resolve-cwd@3.0.0 from lock file
npm error Missing: make-dir@4.0.0 from lock file
npm error Missing: source-map@0.6.1 from lock file
npm error Missing: html-escaper@2.0.2 from lock file
npm error Missing: execa@5.1.1 from lock file
npm error Missing: get-stream@6.0.1 from lock file
npm error Missing: human-signals@2.1.0 from lock file
npm error Missing: merge-stream@2.0.0 from lock file
npm error Missing: npm-run-path@4.0.1 from lock file
npm error Missing: onetime@5.1.2 from lock file
npm error Missing: signal-exit@3.0.7 from lock file
npm error Missing: strip-final-newline@2.0.0 from lock file
npm error Missing: create-jest@29.7.0 from lock file
npm error Missing: prompts@2.4.2 from lock file
npm error Missing: @jest/test-sequencer@29.7.0 from lock file
npm error Missing: babel-jest@29.7.0 from lock file
npm error Missing: deepmerge@4.3.1 from lock file
npm error Missing: jest-circus@29.7.0 from lock file
npm error Missing: jest-environment-node@29.7.0 from lock file
npm error Missing: jest-get-type@29.6.3 from lock file
npm error Missing: parse-json@5.2.0 from lock file
npm error Missing: @types/babel__core@7.20.5 from lock file
npm error Missing: babel-preset-jest@29.6.3 from lock file
npm error Missing: @types/babel__generator@7.27.0 from lock file
npm error Missing: @types/babel__template@7.4.4 from lock file
npm error Missing: @types/babel__traverse@7.20.7 from lock file
npm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file
npm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file
npm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file
npm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file
npm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file
npm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file
npm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file
npm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file
npm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file
npm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file
npm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file
npm error Missing: @jest/environment@29.7.0 from lock file
npm error Missing: @jest/expect@29.7.0 from lock file
npm error Missing: co@4.6.0 from lock file
npm error Missing: dedent@1.6.0 from lock file
npm error Missing: is-generator-fn@2.1.0 from lock file
npm error Missing: jest-each@29.7.0 from lock file
npm error Missing: jest-matcher-utils@29.7.0 from lock file
npm error Missing: pure-rand@6.1.0 from lock file
npm error Missing: stack-utils@2.0.6 from lock file
npm error Missing: @jest/fake-timers@29.7.0 from lock file
npm error Missing: jest-mock@29.7.0 from lock file
npm error Missing: expect@29.7.0 from lock file
npm error Missing: @sinonjs/fake-timers@10.3.0 from lock file
npm error Missing: @sinonjs/commons@3.0.1 from lock file
npm error Missing: type-detect@4.0.8 from lock file
npm error Missing: @jest/expect-utils@29.7.0 from lock file
npm error Missing: @types/graceful-fs@4.1.9 from lock file
npm error Missing: anymatch@3.1.3 from lock file
npm error Missing: fb-watchman@2.0.2 from lock file
npm error Missing: fsevents@2.3.3 from lock file
npm error Missing: walker@1.0.8 from lock file
npm error Missing: normalize-path@3.0.0 from lock file
npm error Missing: bser@2.1.1 from lock file
npm error Missing: node-int64@0.4.0 from lock file
npm error Missing: jest-diff@29.7.0 from lock file
npm error Missing: diff-sequences@29.6.3 from lock file
npm error Missing: @types/stack-utils@2.0.3 from lock file
npm error Missing: jest-pnp-resolver@1.2.3 from lock file
npm error Missing: resolve.exports@2.0.3 from lock file
npm error Missing: emittery@0.13.1 from lock file
npm error Missing: jest-docblock@29.7.0 from lock file
npm error Missing: jest-leak-detector@29.7.0 from lock file
npm error Missing: source-map-support@0.5.13 from lock file
npm error Missing: detect-newline@3.1.0 from lock file
npm error Missing: @jest/globals@29.7.0 from lock file
npm error Missing: @jest/source-map@29.6.3 from lock file
npm error Missing: cjs-module-lexer@1.4.3 from lock file
npm error Missing: strip-bom@4.0.0 from lock file
npm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file
npm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file
npm error Missing: camelcase@6.3.0 from lock file
npm error Missing: leven@3.1.0 from lock file
npm error Missing: supports-color@8.1.1 from lock file
npm error Missing: mimic-fn@2.1.0 from lock file
npm error Missing: error-ex@1.3.2 from lock file
npm error Missing: json-parse-even-better-errors@2.3.1 from lock file
npm error Missing: lines-and-columns@1.2.4 from lock file
npm error Missing: is-arrayish@0.2.1 from lock file
npm error Missing: find-up@4.1.0 from lock file
npm error Missing: ansi-styles@5.2.0 from lock file
npm error Missing: react-is@18.3.1 from lock file
npm error Missing: kleur@3.0.3 from lock file
npm error Missing: sisteransi@1.0.5 from lock file
npm error Missing: resolve-from@5.0.0 from lock file
npm error Missing: buffer-from@1.1.2 from lock file
npm error Missing: escape-string-regexp@2.0.0 from lock file
npm error Missing: char-regex@1.0.2 from lock file
npm error Missing: makeerror@1.0.12 from lock file
npm error Missing: tmpl@1.0.5 from lock file
npm error Missing: yallist@3.1.1 from lock file
npm error Missing: locate-path@5.0.0 from lock file
npm error Missing: argparse@1.0.10 from lock file
npm error Missing: esprima@4.0.1 from lock file
npm error Missing: sprintf-js@1.0.3 from lock file
npm error Missing: p-locate@4.1.0 from lock file
npm error Missing: p-limit@2.3.0 from lock file
npm error Missing: p-try@2.2.0 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: locate-path@5.0.0 from lock file
npm error Missing: p-locate@4.1.0 from lock file
npm error Missing: p-limit@2.3.0 from lock file
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_21_05_080Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504.
[debug] [2025-05-20T03:21:35.222Z] Total Function Deployment time: 60328
[debug] [2025-05-20T03:21:35.222Z] 1 Functions Deployed
[debug] [2025-05-20T03:21:35.222Z] 1 Functions Errored
[debug] [2025-05-20T03:21:35.222Z] 0 Function Deployments Aborted
[debug] [2025-05-20T03:21:35.222Z] Average Function Deployment time: 60327
[info] 
[info] Functions deploy had errors with the following functions:
	trackWebhookEvents(us-central1)
[debug] [2025-05-20T03:21:35.400Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:35.400Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:21:35.400Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-05-20T03:21:36.929Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-05-20T03:21:36.930Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts {"name":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-05-19T10:38:28.187481Z","updateTime":"2025-05-19T13:29:58.340899Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"106919363","vulnerabilityScanningConfig":{"lastEnableTime":"2025-05-19T10:38:19.891126526Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/shay-subscription-analytic/gcf-artifacts"}
[debug] [2025-05-20T03:21:36.930Z] Functions deploy failed.
[debug] [2025-05-20T03:21:36.931Z] {
  "endpoint": {
    "id": "trackWebhookEvents",
    "project": "shay-subscription-analytic",
    "region": "us-central1",
    "entryPoint": "trackWebhookEvents",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "kRcWebhookEventsCollection/{id}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "shay-subscription-analytic",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents",
      "FUNCTION_SIGNATURE_TYPE": "cloudevent",
      "FUNCTION_TARGET": "trackWebhookEvents",
      "LOG_EXECUTION_ID": "true"
    },
    "codebase": "default",
    "runServiceId": "trackwebhookevents",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": true,
    "hash": "f0c2f04b696a133263b0dbf88f582a5346199cad"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: jest@29.7.0 from lock file\nnpm error Missing: @jest/core@29.7.0 from lock file\nnpm error Missing: @jest/types@29.6.3 from lock file\nnpm error Missing: import-local@3.2.0 from lock file\nnpm error Missing: jest-cli@29.7.0 from lock file\nnpm error Missing: @jest/console@29.7.0 from lock file\nnpm error Missing: @jest/reporters@29.7.0 from lock file\nnpm error Missing: @jest/test-result@29.7.0 from lock file\nnpm error Missing: @jest/transform@29.7.0 from lock file\nnpm error Missing: ansi-escapes@4.3.2 from lock file\nnpm error Missing: ci-info@3.9.0 from lock file\nnpm error Missing: exit@0.1.2 from lock file\nnpm error Missing: graceful-fs@4.2.11 from lock file\nnpm error Missing: jest-changed-files@29.7.0 from lock file\nnpm error Missing: jest-config@29.7.0 from lock file\nnpm error Missing: jest-haste-map@29.7.0 from lock file\nnpm error Missing: jest-message-util@29.7.0 from lock file\nnpm error Missing: jest-regex-util@29.6.3 from lock file\nnpm error Missing: jest-resolve@29.7.0 from lock file\nnpm error Missing: jest-resolve-dependencies@29.7.0 from lock file\nnpm error Missing: jest-runner@29.7.0 from lock file\nnpm error Missing: jest-runtime@29.7.0 from lock file\nnpm error Missing: jest-snapshot@29.7.0 from lock file\nnpm error Missing: jest-util@29.7.0 from lock file\nnpm error Missing: jest-validate@29.7.0 from lock file\nnpm error Missing: jest-watcher@29.7.0 from lock file\nnpm error Missing: pretty-format@29.7.0 from lock file\nnpm error Missing: @bcoe/v8-coverage@0.2.3 from lock file\nnpm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file\nnpm error Missing: collect-v8-coverage@1.0.2 from lock file\nnpm error Missing: istanbul-lib-coverage@3.2.2 from lock file\nnpm error Missing: istanbul-lib-instrument@6.0.3 from lock file\nnpm error Missing: istanbul-lib-report@3.0.1 from lock file\nnpm error Missing: istanbul-lib-source-maps@4.0.1 from lock file\nnpm error Missing: istanbul-reports@3.1.7 from lock file\nnpm error Missing: jest-worker@29.7.0 from lock file\nnpm error Missing: string-length@4.0.2 from lock file\nnpm error Missing: v8-to-istanbul@9.3.0 from lock file\nnpm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file\nnpm error Missing: @babel/core@7.27.1 from lock file\nnpm error Missing: babel-plugin-istanbul@6.1.1 from lock file\nnpm error Missing: convert-source-map@2.0.0 from lock file\nnpm error Missing: pirates@4.0.7 from lock file\nnpm error Missing: write-file-atomic@4.0.2 from lock file\nnpm error Missing: @ampproject/remapping@2.3.0 from lock file\nnpm error Missing: @babel/code-frame@7.27.1 from lock file\nnpm error Missing: @babel/generator@7.27.1 from lock file\nnpm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file\nnpm error Missing: @babel/helper-module-transforms@7.27.1 from lock file\nnpm error Missing: @babel/helpers@7.27.1 from lock file\nnpm error Missing: @babel/parser@7.27.2 from lock file\nnpm error Missing: @babel/template@7.27.2 from lock file\nnpm error Missing: @babel/traverse@7.27.1 from lock file\nnpm error Missing: @babel/types@7.27.1 from lock file\nnpm error Missing: gensync@1.0.0-beta.2 from lock file\nnpm error Missing: json5@2.2.3 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file\nnpm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file\nnpm error Missing: js-tokens@4.0.0 from lock file\nnpm error Missing: picocolors@1.1.1 from lock file\nnpm error Missing: jsesc@3.1.0 from lock file\nnpm error Missing: @babel/compat-data@7.27.2 from lock file\nnpm error Missing: @babel/helper-validator-option@7.27.1 from lock file\nnpm error Missing: browserslist@4.24.5 from lock file\nnpm error Missing: lru-cache@5.1.1 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @babel/helper-module-imports@7.27.1 from lock file\nnpm error Missing: globals@11.12.0 from lock file\nnpm error Missing: @babel/helper-string-parser@7.27.1 from lock file\nnpm error Missing: @jest/schemas@29.6.3 from lock file\nnpm error Missing: @types/istanbul-reports@3.0.4 from lock file\nnpm error Missing: @types/yargs@17.0.33 from lock file\nnpm error Missing: @sinclair/typebox@0.27.8 from lock file\nnpm error Missing: @jridgewell/set-array@1.2.1 from lock file\nnpm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file\nnpm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file\nnpm error Missing: @types/istanbul-lib-report@3.0.3 from lock file\nnpm error Missing: @types/yargs-parser@21.0.3 from lock file\nnpm error Missing: type-fest@0.21.3 from lock file\nnpm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file\nnpm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file\nnpm error Missing: @istanbuljs/schema@0.1.3 from lock file\nnpm error Missing: istanbul-lib-instrument@5.2.1 from lock file\nnpm error Missing: test-exclude@6.0.0 from lock file\nnpm error Missing: camelcase@5.3.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: get-package-type@0.1.0 from lock file\nnpm error Missing: js-yaml@3.14.1 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: caniuse-lite@1.0.30001718 from lock file\nnpm error Missing: electron-to-chromium@1.5.155 from lock file\nnpm error Missing: node-releases@2.0.19 from lock file\nnpm error Missing: update-browserslist-db@1.1.3 from lock file\nnpm error Missing: pkg-dir@4.2.0 from lock file\nnpm error Missing: resolve-cwd@3.0.0 from lock file\nnpm error Missing: make-dir@4.0.0 from lock file\nnpm error Missing: source-map@0.6.1 from lock file\nnpm error Missing: html-escaper@2.0.2 from lock file\nnpm error Missing: execa@5.1.1 from lock file\nnpm error Missing: get-stream@6.0.1 from lock file\nnpm error Missing: human-signals@2.1.0 from lock file\nnpm error Missing: merge-stream@2.0.0 from lock file\nnpm error Missing: npm-run-path@4.0.1 from lock file\nnpm error Missing: onetime@5.1.2 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: strip-final-newline@2.0.0 from lock file\nnpm error Missing: create-jest@29.7.0 from lock file\nnpm error Missing: prompts@2.4.2 from lock file\nnpm error Missing: @jest/test-sequencer@29.7.0 from lock file\nnpm error Missing: babel-jest@29.7.0 from lock file\nnpm error Missing: deepmerge@4.3.1 from lock file\nnpm error Missing: jest-circus@29.7.0 from lock file\nnpm error Missing: jest-environment-node@29.7.0 from lock file\nnpm error Missing: jest-get-type@29.6.3 from lock file\nnpm error Missing: parse-json@5.2.0 from lock file\nnpm error Missing: @types/babel__core@7.20.5 from lock file\nnpm error Missing: babel-preset-jest@29.6.3 from lock file\nnpm error Missing: @types/babel__generator@7.27.0 from lock file\nnpm error Missing: @types/babel__template@7.4.4 from lock file\nnpm error Missing: @types/babel__traverse@7.20.7 from lock file\nnpm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file\nnpm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file\nnpm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file\nnpm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file\nnpm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file\nnpm error Missing: @jest/environment@29.7.0 from lock file\nnpm error Missing: @jest/expect@29.7.0 from lock file\nnpm error Missing: co@4.6.0 from lock file\nnpm error Missing: dedent@1.6.0 from lock file\nnpm error Missing: is-generator-fn@2.1.0 from lock file\nnpm error Missing: jest-each@29.7.0 from lock file\nnpm error Missing: jest-matcher-utils@29.7.0 from lock file\nnpm error Missing: pure-rand@6.1.0 from lock file\nnpm error Missing: stack-utils@2.0.6 from lock file\nnpm error Missing: @jest/fake-timers@29.7.0 from lock file\nnpm error Missing: jest-mock@29.7.0 from lock file\nnpm error Missing: expect@29.7.0 from lock file\nnpm error Missing: @sinonjs/fake-timers@10.3.0 from lock file\nnpm error Missing: @sinonjs/commons@3.0.1 from lock file\nnpm error Missing: type-detect@4.0.8 from lock file\nnpm error Missing: @jest/expect-utils@29.7.0 from lock file\nnpm error Missing: @types/graceful-fs@4.1.9 from lock file\nnpm error Missing: anymatch@3.1.3 from lock file\nnpm error Missing: fb-watchman@2.0.2 from lock file\nnpm error Missing: fsevents@2.3.3 from lock file\nnpm error Missing: walker@1.0.8 from lock file\nnpm error Missing: normalize-path@3.0.0 from lock file\nnpm error Missing: bser@2.1.1 from lock file\nnpm error Missing: node-int64@0.4.0 from lock file\nnpm error Missing: jest-diff@29.7.0 from lock file\nnpm error Missing: diff-sequences@29.6.3 from lock file\nnpm error Missing: @types/stack-utils@2.0.3 from lock file\nnpm error Missing: jest-pnp-resolver@1.2.3 from lock file\nnpm error Missing: resolve.exports@2.0.3 from lock file\nnpm error Missing: emittery@0.13.1 from lock file\nnpm error Missing: jest-docblock@29.7.0 from lock file\nnpm error Missing: jest-leak-detector@29.7.0 from lock file\nnpm error Missing: source-map-support@0.5.13 from lock file\nnpm error Missing: detect-newline@3.1.0 from lock file\nnpm error Missing: @jest/globals@29.7.0 from lock file\nnpm error Missing: @jest/source-map@29.6.3 from lock file\nnpm error Missing: cjs-module-lexer@1.4.3 from lock file\nnpm error Missing: strip-bom@4.0.0 from lock file\nnpm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: leven@3.1.0 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: mimic-fn@2.1.0 from lock file\nnpm error Missing: error-ex@1.3.2 from lock file\nnpm error Missing: json-parse-even-better-errors@2.3.1 from lock file\nnpm error Missing: lines-and-columns@1.2.4 from lock file\nnpm error Missing: is-arrayish@0.2.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: ansi-styles@5.2.0 from lock file\nnpm error Missing: react-is@18.3.1 from lock file\nnpm error Missing: kleur@3.0.3 from lock file\nnpm error Missing: sisteransi@1.0.5 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: buffer-from@1.1.2 from lock file\nnpm error Missing: escape-string-regexp@2.0.0 from lock file\nnpm error Missing: char-regex@1.0.2 from lock file\nnpm error Missing: makeerror@1.0.12 from lock file\nnpm error Missing: tmpl@1.0.5 from lock file\nnpm error Missing: yallist@3.1.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: argparse@1.0.10 from lock file\nnpm error Missing: esprima@4.0.1 from lock file\nnpm error Missing: sprintf-js@1.0.3 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error Missing: p-try@2.2.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_21_05_080Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504.",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: jest@29.7.0 from lock file\nnpm error Missing: @jest/core@29.7.0 from lock file\nnpm error Missing: @jest/types@29.6.3 from lock file\nnpm error Missing: import-local@3.2.0 from lock file\nnpm error Missing: jest-cli@29.7.0 from lock file\nnpm error Missing: @jest/console@29.7.0 from lock file\nnpm error Missing: @jest/reporters@29.7.0 from lock file\nnpm error Missing: @jest/test-result@29.7.0 from lock file\nnpm error Missing: @jest/transform@29.7.0 from lock file\nnpm error Missing: ansi-escapes@4.3.2 from lock file\nnpm error Missing: ci-info@3.9.0 from lock file\nnpm error Missing: exit@0.1.2 from lock file\nnpm error Missing: graceful-fs@4.2.11 from lock file\nnpm error Missing: jest-changed-files@29.7.0 from lock file\nnpm error Missing: jest-config@29.7.0 from lock file\nnpm error Missing: jest-haste-map@29.7.0 from lock file\nnpm error Missing: jest-message-util@29.7.0 from lock file\nnpm error Missing: jest-regex-util@29.6.3 from lock file\nnpm error Missing: jest-resolve@29.7.0 from lock file\nnpm error Missing: jest-resolve-dependencies@29.7.0 from lock file\nnpm error Missing: jest-runner@29.7.0 from lock file\nnpm error Missing: jest-runtime@29.7.0 from lock file\nnpm error Missing: jest-snapshot@29.7.0 from lock file\nnpm error Missing: jest-util@29.7.0 from lock file\nnpm error Missing: jest-validate@29.7.0 from lock file\nnpm error Missing: jest-watcher@29.7.0 from lock file\nnpm error Missing: pretty-format@29.7.0 from lock file\nnpm error Missing: @bcoe/v8-coverage@0.2.3 from lock file\nnpm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file\nnpm error Missing: collect-v8-coverage@1.0.2 from lock file\nnpm error Missing: istanbul-lib-coverage@3.2.2 from lock file\nnpm error Missing: istanbul-lib-instrument@6.0.3 from lock file\nnpm error Missing: istanbul-lib-report@3.0.1 from lock file\nnpm error Missing: istanbul-lib-source-maps@4.0.1 from lock file\nnpm error Missing: istanbul-reports@3.1.7 from lock file\nnpm error Missing: jest-worker@29.7.0 from lock file\nnpm error Missing: string-length@4.0.2 from lock file\nnpm error Missing: v8-to-istanbul@9.3.0 from lock file\nnpm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file\nnpm error Missing: @babel/core@7.27.1 from lock file\nnpm error Missing: babel-plugin-istanbul@6.1.1 from lock file\nnpm error Missing: convert-source-map@2.0.0 from lock file\nnpm error Missing: pirates@4.0.7 from lock file\nnpm error Missing: write-file-atomic@4.0.2 from lock file\nnpm error Missing: @ampproject/remapping@2.3.0 from lock file\nnpm error Missing: @babel/code-frame@7.27.1 from lock file\nnpm error Missing: @babel/generator@7.27.1 from lock file\nnpm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file\nnpm error Missing: @babel/helper-module-transforms@7.27.1 from lock file\nnpm error Missing: @babel/helpers@7.27.1 from lock file\nnpm error Missing: @babel/parser@7.27.2 from lock file\nnpm error Missing: @babel/template@7.27.2 from lock file\nnpm error Missing: @babel/traverse@7.27.1 from lock file\nnpm error Missing: @babel/types@7.27.1 from lock file\nnpm error Missing: gensync@1.0.0-beta.2 from lock file\nnpm error Missing: json5@2.2.3 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file\nnpm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file\nnpm error Missing: js-tokens@4.0.0 from lock file\nnpm error Missing: picocolors@1.1.1 from lock file\nnpm error Missing: jsesc@3.1.0 from lock file\nnpm error Missing: @babel/compat-data@7.27.2 from lock file\nnpm error Missing: @babel/helper-validator-option@7.27.1 from lock file\nnpm error Missing: browserslist@4.24.5 from lock file\nnpm error Missing: lru-cache@5.1.1 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @babel/helper-module-imports@7.27.1 from lock file\nnpm error Missing: globals@11.12.0 from lock file\nnpm error Missing: @babel/helper-string-parser@7.27.1 from lock file\nnpm error Missing: @jest/schemas@29.6.3 from lock file\nnpm error Missing: @types/istanbul-reports@3.0.4 from lock file\nnpm error Missing: @types/yargs@17.0.33 from lock file\nnpm error Missing: @sinclair/typebox@0.27.8 from lock file\nnpm error Missing: @jridgewell/set-array@1.2.1 from lock file\nnpm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file\nnpm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file\nnpm error Missing: @types/istanbul-lib-report@3.0.3 from lock file\nnpm error Missing: @types/yargs-parser@21.0.3 from lock file\nnpm error Missing: type-fest@0.21.3 from lock file\nnpm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file\nnpm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file\nnpm error Missing: @istanbuljs/schema@0.1.3 from lock file\nnpm error Missing: istanbul-lib-instrument@5.2.1 from lock file\nnpm error Missing: test-exclude@6.0.0 from lock file\nnpm error Missing: camelcase@5.3.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: get-package-type@0.1.0 from lock file\nnpm error Missing: js-yaml@3.14.1 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: caniuse-lite@1.0.30001718 from lock file\nnpm error Missing: electron-to-chromium@1.5.155 from lock file\nnpm error Missing: node-releases@2.0.19 from lock file\nnpm error Missing: update-browserslist-db@1.1.3 from lock file\nnpm error Missing: pkg-dir@4.2.0 from lock file\nnpm error Missing: resolve-cwd@3.0.0 from lock file\nnpm error Missing: make-dir@4.0.0 from lock file\nnpm error Missing: source-map@0.6.1 from lock file\nnpm error Missing: html-escaper@2.0.2 from lock file\nnpm error Missing: execa@5.1.1 from lock file\nnpm error Missing: get-stream@6.0.1 from lock file\nnpm error Missing: human-signals@2.1.0 from lock file\nnpm error Missing: merge-stream@2.0.0 from lock file\nnpm error Missing: npm-run-path@4.0.1 from lock file\nnpm error Missing: onetime@5.1.2 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: strip-final-newline@2.0.0 from lock file\nnpm error Missing: create-jest@29.7.0 from lock file\nnpm error Missing: prompts@2.4.2 from lock file\nnpm error Missing: @jest/test-sequencer@29.7.0 from lock file\nnpm error Missing: babel-jest@29.7.0 from lock file\nnpm error Missing: deepmerge@4.3.1 from lock file\nnpm error Missing: jest-circus@29.7.0 from lock file\nnpm error Missing: jest-environment-node@29.7.0 from lock file\nnpm error Missing: jest-get-type@29.6.3 from lock file\nnpm error Missing: parse-json@5.2.0 from lock file\nnpm error Missing: @types/babel__core@7.20.5 from lock file\nnpm error Missing: babel-preset-jest@29.6.3 from lock file\nnpm error Missing: @types/babel__generator@7.27.0 from lock file\nnpm error Missing: @types/babel__template@7.4.4 from lock file\nnpm error Missing: @types/babel__traverse@7.20.7 from lock file\nnpm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file\nnpm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file\nnpm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file\nnpm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file\nnpm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file\nnpm error Missing: @jest/environment@29.7.0 from lock file\nnpm error Missing: @jest/expect@29.7.0 from lock file\nnpm error Missing: co@4.6.0 from lock file\nnpm error Missing: dedent@1.6.0 from lock file\nnpm error Missing: is-generator-fn@2.1.0 from lock file\nnpm error Missing: jest-each@29.7.0 from lock file\nnpm error Missing: jest-matcher-utils@29.7.0 from lock file\nnpm error Missing: pure-rand@6.1.0 from lock file\nnpm error Missing: stack-utils@2.0.6 from lock file\nnpm error Missing: @jest/fake-timers@29.7.0 from lock file\nnpm error Missing: jest-mock@29.7.0 from lock file\nnpm error Missing: expect@29.7.0 from lock file\nnpm error Missing: @sinonjs/fake-timers@10.3.0 from lock file\nnpm error Missing: @sinonjs/commons@3.0.1 from lock file\nnpm error Missing: type-detect@4.0.8 from lock file\nnpm error Missing: @jest/expect-utils@29.7.0 from lock file\nnpm error Missing: @types/graceful-fs@4.1.9 from lock file\nnpm error Missing: anymatch@3.1.3 from lock file\nnpm error Missing: fb-watchman@2.0.2 from lock file\nnpm error Missing: fsevents@2.3.3 from lock file\nnpm error Missing: walker@1.0.8 from lock file\nnpm error Missing: normalize-path@3.0.0 from lock file\nnpm error Missing: bser@2.1.1 from lock file\nnpm error Missing: node-int64@0.4.0 from lock file\nnpm error Missing: jest-diff@29.7.0 from lock file\nnpm error Missing: diff-sequences@29.6.3 from lock file\nnpm error Missing: @types/stack-utils@2.0.3 from lock file\nnpm error Missing: jest-pnp-resolver@1.2.3 from lock file\nnpm error Missing: resolve.exports@2.0.3 from lock file\nnpm error Missing: emittery@0.13.1 from lock file\nnpm error Missing: jest-docblock@29.7.0 from lock file\nnpm error Missing: jest-leak-detector@29.7.0 from lock file\nnpm error Missing: source-map-support@0.5.13 from lock file\nnpm error Missing: detect-newline@3.1.0 from lock file\nnpm error Missing: @jest/globals@29.7.0 from lock file\nnpm error Missing: @jest/source-map@29.6.3 from lock file\nnpm error Missing: cjs-module-lexer@1.4.3 from lock file\nnpm error Missing: strip-bom@4.0.0 from lock file\nnpm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: leven@3.1.0 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: mimic-fn@2.1.0 from lock file\nnpm error Missing: error-ex@1.3.2 from lock file\nnpm error Missing: json-parse-even-better-errors@2.3.1 from lock file\nnpm error Missing: lines-and-columns@1.2.4 from lock file\nnpm error Missing: is-arrayish@0.2.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: ansi-styles@5.2.0 from lock file\nnpm error Missing: react-is@18.3.1 from lock file\nnpm error Missing: kleur@3.0.3 from lock file\nnpm error Missing: sisteransi@1.0.5 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: buffer-from@1.1.2 from lock file\nnpm error Missing: escape-string-regexp@2.0.0 from lock file\nnpm error Missing: char-regex@1.0.2 from lock file\nnpm error Missing: makeerror@1.0.12 from lock file\nnpm error Missing: tmpl@1.0.5 from lock file\nnpm error Missing: yallist@3.1.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: argparse@1.0.10 from lock file\nnpm error Missing: esprima@4.0.1 from lock file\nnpm error Missing: sprintf-js@1.0.3 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error Missing: p-try@2.2.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_21_05_080Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/0fc33e45-a790-4289-88c2-60c65b582534?project=831418024504."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-05-20T03:21:36.985Z] Error: Failed to update function trackWebhookEvents in region us-central1
    at C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:399:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV2Function (C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:388:32)
    at async Fabricator.updateEndpoint (C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:13)
    at async handle (C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
[debug] [2025-05-20T03:22:59.144Z] ----------------------------------------------------------------------
[debug] [2025-05-20T03:22:59.147Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions:trackWebhookEvents
[debug] [2025-05-20T03:22:59.148Z] CLI Version:   14.4.0
[debug] [2025-05-20T03:22:59.148Z] Platform:      win32
[debug] [2025-05-20T03:22:59.148Z] Node Version:  v22.13.1
[debug] [2025-05-20T03:22:59.149Z] Time:          Tue May 20 2025 08:52:59 GMT+0530 (India Standard Time)
[debug] [2025-05-20T03:22:59.149Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-05-20T03:22:59.372Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-20T03:22:59.372Z] > authorizing via signed-in user (lakmaldias12@gmail.com)
[debug] [2025-05-20T03:22:59.373Z] [iam] checking project shay-subscription-analytic for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-05-20T03:22:59.374Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:22:59.374Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:22:59.375Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions [none]
[debug] [2025-05-20T03:22:59.375Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:22:59.376Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-20T03:23:00.652Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions 200
[debug] [2025-05-20T03:23:00.653Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-05-20T03:23:00.653Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:00.654Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:00.654Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-05-20T03:23:00.654Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-05-20T03:23:02.075Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-05-20T03:23:02.075Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/shay-subscription-analytic/serviceAccounts/shay-subscription-analytic@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'shay-subscription-analytic'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-05-20T03:23:12.094Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:12.095Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:12.095Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-05-20T03:23:12.095Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:13.664Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com 200
[debug] [2025-05-20T03:23:13.665Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-05-20T03:23:13.665Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:13.665Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:13.665Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic [none]
[debug] [2025-05-20T03:23:14.875Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic 200
[debug] [2025-05-20T03:23:14.876Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic {"projectNumber":"831418024504","projectId":"shay-subscription-analytic","lifecycleState":"ACTIVE","name":"shay-subscription-analytic","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-19T03:46:29.282347Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:14.879Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:14.879Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:14.879Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:14.879Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:14.880Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:14.880Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:14.881Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:14.881Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:14.881Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com [none]
[debug] [2025-05-20T03:23:14.881Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:14.883Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com [none]
[debug] [2025-05-20T03:23:14.883Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:14.885Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com [none]
[debug] [2025-05-20T03:23:14.885Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:14.889Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com [none]
[debug] [2025-05-20T03:23:14.889Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:16.415Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com 200
[debug] [2025-05-20T03:23:16.415Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-05-20T03:23:16.417Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com 200
[debug] [2025-05-20T03:23:16.417Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-05-20T03:23:16.522Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com 200
[debug] [2025-05-20T03:23:16.522Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-05-20T03:23:16.822Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com 200
[debug] [2025-05-20T03:23:16.822Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-05-20T03:23:16.824Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:16.824Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:16.824Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/shay-subscription-analytic/adminSdkConfig [none]
[debug] [2025-05-20T03:23:17.427Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/shay-subscription-analytic/adminSdkConfig 200
[debug] [2025-05-20T03:23:17.428Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/shay-subscription-analytic/adminSdkConfig {"projectId":"shay-subscription-analytic","storageBucket":"shay-subscription-analytic.firebasestorage.app"}
[debug] [2025-05-20T03:23:17.429Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:17.429Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:17.429Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/shay-subscription-analytic/configs [none]
[debug] [2025-05-20T03:23:17.842Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/shay-subscription-analytic/configs 200
[debug] [2025-05-20T03:23:17.842Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/shay-subscription-analytic/configs {}
[debug] [2025-05-20T03:23:17.845Z] Validating nodejs source
[debug] [2025-05-20T03:23:18.842Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^13.4.0",
    "firebase-functions": "^6.3.2"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^5.1.3"
  },
  "private": true
}
[debug] [2025-05-20T03:23:18.842Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-05-20T03:23:18.843Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-05-20T03:23:18.853Z] Found firebase-functions binary at 'E:\Fiver\Orders\google analytic cloud function\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8908

[error] (node:23868) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-05-20T03:23:19.388Z] Got response from /__/functions.yaml {"endpoints":{"trackWebhookEvents":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"kRcWebhookEventsCollection/{id}"},"retry":false},"entryPoint":"trackWebhookEvents"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:23.430Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:23.431Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:23.431Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com [none]
[debug] [2025-05-20T03:23:23.431Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:25.112Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com 200
[debug] [2025-05-20T03:23:25.112Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-05-20T03:23:25.113Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-05-20T03:23:25.113Z] > authorizing via signed-in user (lakmaldias12@gmail.com)
[debug] [2025-05-20T03:23:25.113Z] [iam] checking project shay-subscription-analytic for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-05-20T03:23:25.114Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:25.114Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:25.114Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions [none]
[debug] [2025-05-20T03:23:25.114Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:25.114Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-05-20T03:23:26.222Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions 200
[debug] [2025-05-20T03:23:26.222Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-05-20T03:23:26.223Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:26.223Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:26.224Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/shay-subscription-analytic/instances pageSize=100&pageToken=
[debug] [2025-05-20T03:23:27.572Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/shay-subscription-analytic/instances 200
[debug] [2025-05-20T03:23:27.572Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/shay-subscription-analytic/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged E:\Fiver\Orders\google analytic cloud function\functions (62.22 KB) for uploading 
[debug] [2025-05-20T03:23:27.653Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:27.653Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:27.653Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/shay-subscription-analytic/locations/-/functions [none]
[debug] [2025-05-20T03:23:28.489Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/shay-subscription-analytic/locations/-/functions 200
[debug] [2025-05-20T03:23:28.489Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/shay-subscription-analytic/locations/-/functions {}
[debug] [2025-05-20T03:23:28.490Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:28.490Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:28.490Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-05-20T03:23:30.175Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/-/functions 200
[debug] [2025-05-20T03:23:30.175Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/-/functions {"functions":[{"name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"build":"projects/831418024504/locations/us-central1/builds/738db1f0-6d9f-4af4-a260-794ae89cb890","runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-790910","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"rc-webhook-events/{id}","operator":"match-path-pattern"}],"pubsubTopic":"projects/shay-subscription-analytic/topics/eventarc-nam5-trackwebhookevents-790910-060","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-05-20T03:21:29.373446991Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","createTime":"2025-05-19T10:38:19.692727963Z","satisfiesPzi":true}]}
[debug] [2025-05-20T03:23:30.178Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:30.178Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:30.178Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/shay-subscription-analytic/databases/(default) [none]
[debug] [2025-05-20T03:23:31.668Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/shay-subscription-analytic/databases/(default) 200
[debug] [2025-05-20T03:23:31.668Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/shay-subscription-analytic/databases/(default) {"name":"projects/shay-subscription-analytic/databases/(default)","uid":"ca3ca987-0f89-4e4d-a2e2-bb934598785a","createTime":"2025-05-19T03:59:52.951092Z","updateTime":"2025-05-19T03:59:52.951092Z","locationId":"nam5","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-05-20T02:23:31.505675Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"s","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"etag":"IOKP6a6MsY0DMKnF1YzUro0D"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:31.673Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:31.673Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:31.674Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:31.674Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:31.675Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:31.675Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-05-20T03:23:31.676Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:31.676Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:31.676Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com [none]
[debug] [2025-05-20T03:23:31.676Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:23:31.678Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com [none]
[debug] [2025-05-20T03:23:31.678Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:23:31.680Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com [none]
[debug] [2025-05-20T03:23:31.680Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:23:31.683Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com [none]
[debug] [2025-05-20T03:23:31.683Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com x-goog-quota-user=projects/831418024504
[debug] [2025-05-20T03:23:33.201Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com 200
[debug] [2025-05-20T03:23:33.202Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-05-20T03:23:33.205Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com 200
[debug] [2025-05-20T03:23:33.205Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-05-20T03:23:33.374Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com 200
[debug] [2025-05-20T03:23:33.374Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-05-20T03:23:33.429Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com 200
[debug] [2025-05-20T03:23:33.429Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/831418024504/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-05-20T03:23:33.431Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:33.431Z] Checked if tokens are valid: true, expires at: 1747714789725
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-05-20T03:23:33.431Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:33.431Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:33.432Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-05-20T03:23:33.432Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-05-20T03:23:34.020Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-05-20T03:23:34.021Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-831418024504@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"103794396729619015861"}}
[debug] [2025-05-20T03:23:34.941Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-05-20T03:23:34.941Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/831418024504/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-831418024504@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"104094222085622943943"}}
[debug] [2025-05-20T03:23:34.946Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:34.946Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:34.946Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-05-20T03:23:34.946Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/shay-subscription-analytic
[debug] [2025-05-20T03:23:35.282Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com 200
[debug] [2025-05-20T03:23:35.283Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/shay-subscription-analytic/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-05-20T03:23:35.283Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:35.284Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:35.284Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic [none]
[debug] [2025-05-20T03:23:36.478Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic 200
[debug] [2025-05-20T03:23:36.478Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/shay-subscription-analytic {"projectNumber":"831418024504","projectId":"shay-subscription-analytic","lifecycleState":"ACTIVE","name":"shay-subscription-analytic","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-05-19T03:46:29.282347Z"}
[debug] [2025-05-20T03:23:36.479Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:36.479Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:36.479Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/831418024504 [none]
[debug] [2025-05-20T03:23:36.859Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/831418024504 403
[debug] [2025-05-20T03:23:36.859Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/831418024504 {"error":{"code":403,"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504","serviceTitle":"Compute Engine API","consumer":"projects/831418024504","containerInfo":"831418024504"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504"}]}]}}
[debug] [2025-05-20T03:23:36.860Z] unable to look up default compute service account. Falling back to 831418024504-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504","serviceTitle":"Compute Engine API","consumer":"projects/831418024504","containerInfo":"831418024504"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/831418024504 had HTTP Error: 403, Compute Engine API has not been used in project 831418024504 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=831418024504 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-05-20T03:23:36.862Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:36.862Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:36.862Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/shay-subscription-analytic/billingInfo [none]
[debug] [2025-05-20T03:23:38.344Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/shay-subscription-analytic/billingInfo 200
[debug] [2025-05-20T03:23:38.344Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/shay-subscription-analytic/billingInfo {"name":"projects/shay-subscription-analytic/billingInfo","projectId":"shay-subscription-analytic","billingAccountName":"billingAccounts/0141F0-C63415-ACA65E","billingEnabled":true}
[debug] [2025-05-20T03:23:38.347Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:38.347Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:38.347Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-05-20T03:23:39.857Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-05-20T03:23:39.858Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip?GoogleAccessId=service-831418024504@gcf-admin-robot.iam.gserviceaccount.com&Expires=1747713219&Signature=fuVRcEyyt1UimydoJNricnoTD6FHx%2FuEidK5syTSX9aaDNLEnQmJqTJp3%2FUAmZUg7k7PfWLuuiJtIgVRD44kgRqrceY%2Bc24j%2BL8N7vjpnIx3UhSBhQFDpM5DZ95CkWN8%2BFlNBn4tRYEd7YGi0nVYCkUUhIiMJlhOllJlTFyPwFJnm3vGP7an1shJJss9vZ28EW9KtzTSJzfH%2Fpz8LRHvRY18y2octIvmB%2FltaHdThAExq2cSpaezp2Nx1d5GNUO5Ob%2FOiiAhXJTPKbC6qNnqDR8m8v8M%2F82DLLdW3kezrAh05ws1uSQgkarp%2FNilwZVlj7gt603wiTvCRTzS0mLcNQ%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com","object":"3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip"}}
[debug] [2025-05-20T03:23:39.859Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip GoogleAccessId=service-831418024504%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1747713219&Signature=fuVRcEyyt1UimydoJNricnoTD6FHx%2FuEidK5syTSX9aaDNLEnQmJqTJp3%2FUAmZUg7k7PfWLuuiJtIgVRD44kgRqrceY%2Bc24j%2BL8N7vjpnIx3UhSBhQFDpM5DZ95CkWN8%2BFlNBn4tRYEd7YGi0nVYCkUUhIiMJlhOllJlTFyPwFJnm3vGP7an1shJJss9vZ28EW9KtzTSJzfH%2Fpz8LRHvRY18y2octIvmB%2FltaHdThAExq2cSpaezp2Nx1d5GNUO5Ob%2FOiiAhXJTPKbC6qNnqDR8m8v8M%2F82DLLdW3kezrAh05ws1uSQgkarp%2FNilwZVlj7gt603wiTvCRTzS0mLcNQ%3D%3D
[debug] [2025-05-20T03:23:39.859Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip [stream]
[debug] [2025-05-20T03:23:40.638Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip 200
[debug] [2025-05-20T03:23:40.639Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com/3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 22 (2nd Gen) function trackWebhookEvents(us-central1)... 
[debug] [2025-05-20T03:23:40.647Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:40.648Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:40.648Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion
[debug] [2025-05-20T03:23:40.648Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents {"name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-uploads-831418024504.us-central1.cloudfunctions.appspot.com","object":"3a2b3a2b-b56c-40be-b459-535b917bd6a5.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"triggerRegion":"nam5"}}
[debug] [2025-05-20T03:23:43.237Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents 200
[debug] [2025-05-20T03:23:43.237Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-05-20T03:23:43.238Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:43.238Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:43.238Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:23:44.567Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:23:44.567Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:23:45.081Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:23:45.082Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:45.082Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:45.082Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:23:46.410Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:23:46.410Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:23:47.413Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:23:47.414Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:47.414Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:47.415Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:23:48.771Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:23:48.772Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:23:50.783Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:23:50.783Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:50.783Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:50.784Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:23:52.145Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:23:52.145Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:23:56.147Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:23:56.148Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:56.148Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:23:56.148Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:23:57.474Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:23:57.475Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:24:05.479Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:24:05.480Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:05.480Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:05.480Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:24:06.891Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:24:06.892Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:24:16.898Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:24:16.898Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:16.898Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:16.899Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:24:18.363Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:24:18.363Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:24:28.364Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:24:28.365Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:28.365Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:28.365Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:24:29.829Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:24:29.829Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/831418024504/locations/us-central1/builds/66e0279c-1d46-4604-a24d-0c8b2be82414"},"done":false}
[debug] [2025-05-20T03:24:39.844Z] [update-default-us-central1-trackWebhookEvents] Retrying task index 0
[debug] [2025-05-20T03:24:39.845Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:39.845Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:39.846Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f [none]
[debug] [2025-05-20T03:24:41.298Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f 200
[debug] [2025-05-20T03:24:41.299Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f {"name":"projects/shay-subscription-analytic/locations/us-central1/operations/operation-1747711421845-63588c6780ed7-b86b9754-61bd823f","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-05-20T03:23:43.037923138Z","endTime":"2025-05-20T03:24:31.991096934Z","target":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/shay-subscription-analytic/locations/us-central1/functions/trackWebhookEvents","buildConfig":{"runtime":"nodejs22","entryPoint":"trackWebhookEvents","source":{"storageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747711422957323"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-831418024504-us-central1","object":"trackWebhookEvents/function-source.zip","generation":"1747661355113566"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/shay-subscription-analytic/serviceAccounts/831418024504-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/shay-subscription-analytic/locations/us-central1/services/trackwebhookevents","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}","GCLOUD_PROJECT":"shay-subscription-analytic","EVENTARC_CLOUD_EVENT_SOURCE":"projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"trackWebhookEvents","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://trackwebhookevents-kt4umsyeoa-uc.a.run.app","serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"trackwebhookevents-00002-lac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/shay-subscription-analytic/locations/nam5/triggers/trackwebhookevents-454716","triggerRegion":"nam5","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"kRcWebhookEventsCollection/{id}","operator":"match-path-pattern"}],"serviceAccountEmail":"831418024504-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"f0c2f04b696a133263b0dbf88f582a5346199cad"},"environment":"GEN_2","url":"https://us-central1-shay-subscription-analytic.cloudfunctions.net/trackWebhookEvents","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: jest@29.7.0 from lock file\nnpm error Missing: @jest/core@29.7.0 from lock file\nnpm error Missing: @jest/types@29.6.3 from lock file\nnpm error Missing: import-local@3.2.0 from lock file\nnpm error Missing: jest-cli@29.7.0 from lock file\nnpm error Missing: @jest/console@29.7.0 from lock file\nnpm error Missing: @jest/reporters@29.7.0 from lock file\nnpm error Missing: @jest/test-result@29.7.0 from lock file\nnpm error Missing: @jest/transform@29.7.0 from lock file\nnpm error Missing: ansi-escapes@4.3.2 from lock file\nnpm error Missing: ci-info@3.9.0 from lock file\nnpm error Missing: exit@0.1.2 from lock file\nnpm error Missing: graceful-fs@4.2.11 from lock file\nnpm error Missing: jest-changed-files@29.7.0 from lock file\nnpm error Missing: jest-config@29.7.0 from lock file\nnpm error Missing: jest-haste-map@29.7.0 from lock file\nnpm error Missing: jest-message-util@29.7.0 from lock file\nnpm error Missing: jest-regex-util@29.6.3 from lock file\nnpm error Missing: jest-resolve@29.7.0 from lock file\nnpm error Missing: jest-resolve-dependencies@29.7.0 from lock file\nnpm error Missing: jest-runner@29.7.0 from lock file\nnpm error Missing: jest-runtime@29.7.0 from lock file\nnpm error Missing: jest-snapshot@29.7.0 from lock file\nnpm error Missing: jest-util@29.7.0 from lock file\nnpm error Missing: jest-validate@29.7.0 from lock file\nnpm error Missing: jest-watcher@29.7.0 from lock file\nnpm error Missing: pretty-format@29.7.0 from lock file\nnpm error Missing: @bcoe/v8-coverage@0.2.3 from lock file\nnpm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file\nnpm error Missing: collect-v8-coverage@1.0.2 from lock file\nnpm error Missing: istanbul-lib-coverage@3.2.2 from lock file\nnpm error Missing: istanbul-lib-instrument@6.0.3 from lock file\nnpm error Missing: istanbul-lib-report@3.0.1 from lock file\nnpm error Missing: istanbul-lib-source-maps@4.0.1 from lock file\nnpm error Missing: istanbul-reports@3.1.7 from lock file\nnpm error Missing: jest-worker@29.7.0 from lock file\nnpm error Missing: string-length@4.0.2 from lock file\nnpm error Missing: v8-to-istanbul@9.3.0 from lock file\nnpm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file\nnpm error Missing: @babel/core@7.27.1 from lock file\nnpm error Missing: babel-plugin-istanbul@6.1.1 from lock file\nnpm error Missing: convert-source-map@2.0.0 from lock file\nnpm error Missing: pirates@4.0.7 from lock file\nnpm error Missing: write-file-atomic@4.0.2 from lock file\nnpm error Missing: @ampproject/remapping@2.3.0 from lock file\nnpm error Missing: @babel/code-frame@7.27.1 from lock file\nnpm error Missing: @babel/generator@7.27.1 from lock file\nnpm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file\nnpm error Missing: @babel/helper-module-transforms@7.27.1 from lock file\nnpm error Missing: @babel/helpers@7.27.1 from lock file\nnpm error Missing: @babel/parser@7.27.2 from lock file\nnpm error Missing: @babel/template@7.27.2 from lock file\nnpm error Missing: @babel/traverse@7.27.1 from lock file\nnpm error Missing: @babel/types@7.27.1 from lock file\nnpm error Missing: gensync@1.0.0-beta.2 from lock file\nnpm error Missing: json5@2.2.3 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file\nnpm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file\nnpm error Missing: js-tokens@4.0.0 from lock file\nnpm error Missing: picocolors@1.1.1 from lock file\nnpm error Missing: jsesc@3.1.0 from lock file\nnpm error Missing: @babel/compat-data@7.27.2 from lock file\nnpm error Missing: @babel/helper-validator-option@7.27.1 from lock file\nnpm error Missing: browserslist@4.24.5 from lock file\nnpm error Missing: lru-cache@5.1.1 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @babel/helper-module-imports@7.27.1 from lock file\nnpm error Missing: globals@11.12.0 from lock file\nnpm error Missing: @babel/helper-string-parser@7.27.1 from lock file\nnpm error Missing: @jest/schemas@29.6.3 from lock file\nnpm error Missing: @types/istanbul-reports@3.0.4 from lock file\nnpm error Missing: @types/yargs@17.0.33 from lock file\nnpm error Missing: @sinclair/typebox@0.27.8 from lock file\nnpm error Missing: @jridgewell/set-array@1.2.1 from lock file\nnpm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file\nnpm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file\nnpm error Missing: @types/istanbul-lib-report@3.0.3 from lock file\nnpm error Missing: @types/yargs-parser@21.0.3 from lock file\nnpm error Missing: type-fest@0.21.3 from lock file\nnpm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file\nnpm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file\nnpm error Missing: @istanbuljs/schema@0.1.3 from lock file\nnpm error Missing: istanbul-lib-instrument@5.2.1 from lock file\nnpm error Missing: test-exclude@6.0.0 from lock file\nnpm error Missing: camelcase@5.3.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: get-package-type@0.1.0 from lock file\nnpm error Missing: js-yaml@3.14.1 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: caniuse-lite@1.0.30001718 from lock file\nnpm error Missing: electron-to-chromium@1.5.155 from lock file\nnpm error Missing: node-releases@2.0.19 from lock file\nnpm error Missing: update-browserslist-db@1.1.3 from lock file\nnpm error Missing: pkg-dir@4.2.0 from lock file\nnpm error Missing: resolve-cwd@3.0.0 from lock file\nnpm error Missing: make-dir@4.0.0 from lock file\nnpm error Missing: source-map@0.6.1 from lock file\nnpm error Missing: html-escaper@2.0.2 from lock file\nnpm error Missing: execa@5.1.1 from lock file\nnpm error Missing: get-stream@6.0.1 from lock file\nnpm error Missing: human-signals@2.1.0 from lock file\nnpm error Missing: merge-stream@2.0.0 from lock file\nnpm error Missing: npm-run-path@4.0.1 from lock file\nnpm error Missing: onetime@5.1.2 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: strip-final-newline@2.0.0 from lock file\nnpm error Missing: create-jest@29.7.0 from lock file\nnpm error Missing: prompts@2.4.2 from lock file\nnpm error Missing: @jest/test-sequencer@29.7.0 from lock file\nnpm error Missing: babel-jest@29.7.0 from lock file\nnpm error Missing: deepmerge@4.3.1 from lock file\nnpm error Missing: jest-circus@29.7.0 from lock file\nnpm error Missing: jest-environment-node@29.7.0 from lock file\nnpm error Missing: jest-get-type@29.6.3 from lock file\nnpm error Missing: parse-json@5.2.0 from lock file\nnpm error Missing: @types/babel__core@7.20.5 from lock file\nnpm error Missing: babel-preset-jest@29.6.3 from lock file\nnpm error Missing: @types/babel__generator@7.27.0 from lock file\nnpm error Missing: @types/babel__template@7.4.4 from lock file\nnpm error Missing: @types/babel__traverse@7.20.7 from lock file\nnpm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file\nnpm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file\nnpm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file\nnpm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file\nnpm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file\nnpm error Missing: @jest/environment@29.7.0 from lock file\nnpm error Missing: @jest/expect@29.7.0 from lock file\nnpm error Missing: co@4.6.0 from lock file\nnpm error Missing: dedent@1.6.0 from lock file\nnpm error Missing: is-generator-fn@2.1.0 from lock file\nnpm error Missing: jest-each@29.7.0 from lock file\nnpm error Missing: jest-matcher-utils@29.7.0 from lock file\nnpm error Missing: pure-rand@6.1.0 from lock file\nnpm error Missing: stack-utils@2.0.6 from lock file\nnpm error Missing: @jest/fake-timers@29.7.0 from lock file\nnpm error Missing: jest-mock@29.7.0 from lock file\nnpm error Missing: expect@29.7.0 from lock file\nnpm error Missing: @sinonjs/fake-timers@10.3.0 from lock file\nnpm error Missing: @sinonjs/commons@3.0.1 from lock file\nnpm error Missing: type-detect@4.0.8 from lock file\nnpm error Missing: @jest/expect-utils@29.7.0 from lock file\nnpm error Missing: @types/graceful-fs@4.1.9 from lock file\nnpm error Missing: anymatch@3.1.3 from lock file\nnpm error Missing: fb-watchman@2.0.2 from lock file\nnpm error Missing: fsevents@2.3.3 from lock file\nnpm error Missing: walker@1.0.8 from lock file\nnpm error Missing: normalize-path@3.0.0 from lock file\nnpm error Missing: bser@2.1.1 from lock file\nnpm error Missing: node-int64@0.4.0 from lock file\nnpm error Missing: jest-diff@29.7.0 from lock file\nnpm error Missing: diff-sequences@29.6.3 from lock file\nnpm error Missing: @types/stack-utils@2.0.3 from lock file\nnpm error Missing: jest-pnp-resolver@1.2.3 from lock file\nnpm error Missing: resolve.exports@2.0.3 from lock file\nnpm error Missing: emittery@0.13.1 from lock file\nnpm error Missing: jest-docblock@29.7.0 from lock file\nnpm error Missing: jest-leak-detector@29.7.0 from lock file\nnpm error Missing: source-map-support@0.5.13 from lock file\nnpm error Missing: detect-newline@3.1.0 from lock file\nnpm error Missing: @jest/globals@29.7.0 from lock file\nnpm error Missing: @jest/source-map@29.6.3 from lock file\nnpm error Missing: cjs-module-lexer@1.4.3 from lock file\nnpm error Missing: strip-bom@4.0.0 from lock file\nnpm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: leven@3.1.0 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: mimic-fn@2.1.0 from lock file\nnpm error Missing: error-ex@1.3.2 from lock file\nnpm error Missing: json-parse-even-better-errors@2.3.1 from lock file\nnpm error Missing: lines-and-columns@1.2.4 from lock file\nnpm error Missing: is-arrayish@0.2.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: ansi-styles@5.2.0 from lock file\nnpm error Missing: react-is@18.3.1 from lock file\nnpm error Missing: kleur@3.0.3 from lock file\nnpm error Missing: sisteransi@1.0.5 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: buffer-from@1.1.2 from lock file\nnpm error Missing: escape-string-regexp@2.0.0 from lock file\nnpm error Missing: char-regex@1.0.2 from lock file\nnpm error Missing: makeerror@1.0.12 from lock file\nnpm error Missing: tmpl@1.0.5 from lock file\nnpm error Missing: yallist@3.1.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: argparse@1.0.10 from lock file\nnpm error Missing: esprima@4.0.1 from lock file\nnpm error Missing: sprintf-js@1.0.3 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error Missing: p-try@2.2.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_24_07_873Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504."}}
[debug] [2025-05-20T03:24:41.299Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm error code EUSAGE
npm error
npm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
npm error
npm error Missing: jest@29.7.0 from lock file
npm error Missing: @jest/core@29.7.0 from lock file
npm error Missing: @jest/types@29.6.3 from lock file
npm error Missing: import-local@3.2.0 from lock file
npm error Missing: jest-cli@29.7.0 from lock file
npm error Missing: @jest/console@29.7.0 from lock file
npm error Missing: @jest/reporters@29.7.0 from lock file
npm error Missing: @jest/test-result@29.7.0 from lock file
npm error Missing: @jest/transform@29.7.0 from lock file
npm error Missing: ansi-escapes@4.3.2 from lock file
npm error Missing: ci-info@3.9.0 from lock file
npm error Missing: exit@0.1.2 from lock file
npm error Missing: graceful-fs@4.2.11 from lock file
npm error Missing: jest-changed-files@29.7.0 from lock file
npm error Missing: jest-config@29.7.0 from lock file
npm error Missing: jest-haste-map@29.7.0 from lock file
npm error Missing: jest-message-util@29.7.0 from lock file
npm error Missing: jest-regex-util@29.6.3 from lock file
npm error Missing: jest-resolve@29.7.0 from lock file
npm error Missing: jest-resolve-dependencies@29.7.0 from lock file
npm error Missing: jest-runner@29.7.0 from lock file
npm error Missing: jest-runtime@29.7.0 from lock file
npm error Missing: jest-snapshot@29.7.0 from lock file
npm error Missing: jest-util@29.7.0 from lock file
npm error Missing: jest-validate@29.7.0 from lock file
npm error Missing: jest-watcher@29.7.0 from lock file
npm error Missing: pretty-format@29.7.0 from lock file
npm error Missing: @bcoe/v8-coverage@0.2.3 from lock file
npm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file
npm error Missing: collect-v8-coverage@1.0.2 from lock file
npm error Missing: istanbul-lib-coverage@3.2.2 from lock file
npm error Missing: istanbul-lib-instrument@6.0.3 from lock file
npm error Missing: istanbul-lib-report@3.0.1 from lock file
npm error Missing: istanbul-lib-source-maps@4.0.1 from lock file
npm error Missing: istanbul-reports@3.1.7 from lock file
npm error Missing: jest-worker@29.7.0 from lock file
npm error Missing: string-length@4.0.2 from lock file
npm error Missing: v8-to-istanbul@9.3.0 from lock file
npm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file
npm error Missing: @babel/core@7.27.1 from lock file
npm error Missing: babel-plugin-istanbul@6.1.1 from lock file
npm error Missing: convert-source-map@2.0.0 from lock file
npm error Missing: pirates@4.0.7 from lock file
npm error Missing: write-file-atomic@4.0.2 from lock file
npm error Missing: @ampproject/remapping@2.3.0 from lock file
npm error Missing: @babel/code-frame@7.27.1 from lock file
npm error Missing: @babel/generator@7.27.1 from lock file
npm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file
npm error Missing: @babel/helper-module-transforms@7.27.1 from lock file
npm error Missing: @babel/helpers@7.27.1 from lock file
npm error Missing: @babel/parser@7.27.2 from lock file
npm error Missing: @babel/template@7.27.2 from lock file
npm error Missing: @babel/traverse@7.27.1 from lock file
npm error Missing: @babel/types@7.27.1 from lock file
npm error Missing: gensync@1.0.0-beta.2 from lock file
npm error Missing: json5@2.2.3 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file
npm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file
npm error Missing: js-tokens@4.0.0 from lock file
npm error Missing: picocolors@1.1.1 from lock file
npm error Missing: jsesc@3.1.0 from lock file
npm error Missing: @babel/compat-data@7.27.2 from lock file
npm error Missing: @babel/helper-validator-option@7.27.1 from lock file
npm error Missing: browserslist@4.24.5 from lock file
npm error Missing: lru-cache@5.1.1 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: @babel/helper-module-imports@7.27.1 from lock file
npm error Missing: globals@11.12.0 from lock file
npm error Missing: @babel/helper-string-parser@7.27.1 from lock file
npm error Missing: @jest/schemas@29.6.3 from lock file
npm error Missing: @types/istanbul-reports@3.0.4 from lock file
npm error Missing: @types/yargs@17.0.33 from lock file
npm error Missing: @sinclair/typebox@0.27.8 from lock file
npm error Missing: @jridgewell/set-array@1.2.1 from lock file
npm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file
npm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file
npm error Missing: @types/istanbul-lib-report@3.0.3 from lock file
npm error Missing: @types/yargs-parser@21.0.3 from lock file
npm error Missing: type-fest@0.21.3 from lock file
npm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file
npm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file
npm error Missing: @istanbuljs/schema@0.1.3 from lock file
npm error Missing: istanbul-lib-instrument@5.2.1 from lock file
npm error Missing: test-exclude@6.0.0 from lock file
npm error Missing: camelcase@5.3.1 from lock file
npm error Missing: find-up@4.1.0 from lock file
npm error Missing: get-package-type@0.1.0 from lock file
npm error Missing: js-yaml@3.14.1 from lock file
npm error Missing: resolve-from@5.0.0 from lock file
npm error Missing: caniuse-lite@1.0.30001718 from lock file
npm error Missing: electron-to-chromium@1.5.155 from lock file
npm error Missing: node-releases@2.0.19 from lock file
npm error Missing: update-browserslist-db@1.1.3 from lock file
npm error Missing: pkg-dir@4.2.0 from lock file
npm error Missing: resolve-cwd@3.0.0 from lock file
npm error Missing: make-dir@4.0.0 from lock file
npm error Missing: source-map@0.6.1 from lock file
npm error Missing: html-escaper@2.0.2 from lock file
npm error Missing: execa@5.1.1 from lock file
npm error Missing: get-stream@6.0.1 from lock file
npm error Missing: human-signals@2.1.0 from lock file
npm error Missing: merge-stream@2.0.0 from lock file
npm error Missing: npm-run-path@4.0.1 from lock file
npm error Missing: onetime@5.1.2 from lock file
npm error Missing: signal-exit@3.0.7 from lock file
npm error Missing: strip-final-newline@2.0.0 from lock file
npm error Missing: create-jest@29.7.0 from lock file
npm error Missing: prompts@2.4.2 from lock file
npm error Missing: @jest/test-sequencer@29.7.0 from lock file
npm error Missing: babel-jest@29.7.0 from lock file
npm error Missing: deepmerge@4.3.1 from lock file
npm error Missing: jest-circus@29.7.0 from lock file
npm error Missing: jest-environment-node@29.7.0 from lock file
npm error Missing: jest-get-type@29.6.3 from lock file
npm error Missing: parse-json@5.2.0 from lock file
npm error Missing: @types/babel__core@7.20.5 from lock file
npm error Missing: babel-preset-jest@29.6.3 from lock file
npm error Missing: @types/babel__generator@7.27.0 from lock file
npm error Missing: @types/babel__template@7.4.4 from lock file
npm error Missing: @types/babel__traverse@7.20.7 from lock file
npm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file
npm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file
npm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file
npm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file
npm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file
npm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file
npm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file
npm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file
npm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file
npm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file
npm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file
npm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file
npm error Missing: @jest/environment@29.7.0 from lock file
npm error Missing: @jest/expect@29.7.0 from lock file
npm error Missing: co@4.6.0 from lock file
npm error Missing: dedent@1.6.0 from lock file
npm error Missing: is-generator-fn@2.1.0 from lock file
npm error Missing: jest-each@29.7.0 from lock file
npm error Missing: jest-matcher-utils@29.7.0 from lock file
npm error Missing: pure-rand@6.1.0 from lock file
npm error Missing: stack-utils@2.0.6 from lock file
npm error Missing: @jest/fake-timers@29.7.0 from lock file
npm error Missing: jest-mock@29.7.0 from lock file
npm error Missing: expect@29.7.0 from lock file
npm error Missing: @sinonjs/fake-timers@10.3.0 from lock file
npm error Missing: @sinonjs/commons@3.0.1 from lock file
npm error Missing: type-detect@4.0.8 from lock file
npm error Missing: @jest/expect-utils@29.7.0 from lock file
npm error Missing: @types/graceful-fs@4.1.9 from lock file
npm error Missing: anymatch@3.1.3 from lock file
npm error Missing: fb-watchman@2.0.2 from lock file
npm error Missing: fsevents@2.3.3 from lock file
npm error Missing: walker@1.0.8 from lock file
npm error Missing: normalize-path@3.0.0 from lock file
npm error Missing: bser@2.1.1 from lock file
npm error Missing: node-int64@0.4.0 from lock file
npm error Missing: jest-diff@29.7.0 from lock file
npm error Missing: diff-sequences@29.6.3 from lock file
npm error Missing: @types/stack-utils@2.0.3 from lock file
npm error Missing: jest-pnp-resolver@1.2.3 from lock file
npm error Missing: resolve.exports@2.0.3 from lock file
npm error Missing: emittery@0.13.1 from lock file
npm error Missing: jest-docblock@29.7.0 from lock file
npm error Missing: jest-leak-detector@29.7.0 from lock file
npm error Missing: source-map-support@0.5.13 from lock file
npm error Missing: detect-newline@3.1.0 from lock file
npm error Missing: @jest/globals@29.7.0 from lock file
npm error Missing: @jest/source-map@29.6.3 from lock file
npm error Missing: cjs-module-lexer@1.4.3 from lock file
npm error Missing: strip-bom@4.0.0 from lock file
npm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file
npm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file
npm error Missing: camelcase@6.3.0 from lock file
npm error Missing: leven@3.1.0 from lock file
npm error Missing: supports-color@8.1.1 from lock file
npm error Missing: mimic-fn@2.1.0 from lock file
npm error Missing: error-ex@1.3.2 from lock file
npm error Missing: json-parse-even-better-errors@2.3.1 from lock file
npm error Missing: lines-and-columns@1.2.4 from lock file
npm error Missing: is-arrayish@0.2.1 from lock file
npm error Missing: find-up@4.1.0 from lock file
npm error Missing: ansi-styles@5.2.0 from lock file
npm error Missing: react-is@18.3.1 from lock file
npm error Missing: kleur@3.0.3 from lock file
npm error Missing: sisteransi@1.0.5 from lock file
npm error Missing: resolve-from@5.0.0 from lock file
npm error Missing: buffer-from@1.1.2 from lock file
npm error Missing: escape-string-regexp@2.0.0 from lock file
npm error Missing: char-regex@1.0.2 from lock file
npm error Missing: makeerror@1.0.12 from lock file
npm error Missing: tmpl@1.0.5 from lock file
npm error Missing: yallist@3.1.1 from lock file
npm error Missing: locate-path@5.0.0 from lock file
npm error Missing: argparse@1.0.10 from lock file
npm error Missing: esprima@4.0.1 from lock file
npm error Missing: sprintf-js@1.0.3 from lock file
npm error Missing: p-locate@4.1.0 from lock file
npm error Missing: p-limit@2.3.0 from lock file
npm error Missing: p-try@2.2.0 from lock file
npm error Missing: semver@6.3.1 from lock file
npm error Missing: locate-path@5.0.0 from lock file
npm error Missing: p-locate@4.1.0 from lock file
npm error Missing: p-limit@2.3.0 from lock file
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_24_07_873Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504.
[debug] [2025-05-20T03:24:41.327Z] Total Function Deployment time: 60675
[debug] [2025-05-20T03:24:41.327Z] 1 Functions Deployed
[debug] [2025-05-20T03:24:41.327Z] 1 Functions Errored
[debug] [2025-05-20T03:24:41.327Z] 0 Function Deployments Aborted
[debug] [2025-05-20T03:24:41.327Z] Average Function Deployment time: 60673
[info] 
[info] Functions deploy had errors with the following functions:
	trackWebhookEvents(us-central1)
[debug] [2025-05-20T03:24:41.484Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:41.484Z] Checked if tokens are valid: true, expires at: 1747714789725
[debug] [2025-05-20T03:24:41.484Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-05-20T03:24:42.937Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-05-20T03:24:42.937Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts {"name":"projects/shay-subscription-analytic/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-05-19T10:38:28.187481Z","updateTime":"2025-05-19T13:29:58.340899Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"106919363","vulnerabilityScanningConfig":{"lastEnableTime":"2025-05-19T10:38:19.891126526Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/shay-subscription-analytic/gcf-artifacts"}
[debug] [2025-05-20T03:24:42.938Z] Functions deploy failed.
[debug] [2025-05-20T03:24:42.938Z] {
  "endpoint": {
    "id": "trackWebhookEvents",
    "project": "shay-subscription-analytic",
    "region": "us-central1",
    "entryPoint": "trackWebhookEvents",
    "platform": "gcfv2",
    "runtime": "nodejs22",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "kRcWebhookEventsCollection/{id}"
      },
      "region": "nam5"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"shay-subscription-analytic\",\"storageBucket\":\"shay-subscription-analytic.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "shay-subscription-analytic",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/shay-subscription-analytic/locations/us-central1/services/trackWebhookEvents",
      "FUNCTION_SIGNATURE_TYPE": "cloudevent",
      "FUNCTION_TARGET": "trackWebhookEvents",
      "LOG_EXECUTION_ID": "true"
    },
    "codebase": "default",
    "runServiceId": "trackwebhookevents",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": true,
    "hash": "f0c2f04b696a133263b0dbf88f582a5346199cad"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: jest@29.7.0 from lock file\nnpm error Missing: @jest/core@29.7.0 from lock file\nnpm error Missing: @jest/types@29.6.3 from lock file\nnpm error Missing: import-local@3.2.0 from lock file\nnpm error Missing: jest-cli@29.7.0 from lock file\nnpm error Missing: @jest/console@29.7.0 from lock file\nnpm error Missing: @jest/reporters@29.7.0 from lock file\nnpm error Missing: @jest/test-result@29.7.0 from lock file\nnpm error Missing: @jest/transform@29.7.0 from lock file\nnpm error Missing: ansi-escapes@4.3.2 from lock file\nnpm error Missing: ci-info@3.9.0 from lock file\nnpm error Missing: exit@0.1.2 from lock file\nnpm error Missing: graceful-fs@4.2.11 from lock file\nnpm error Missing: jest-changed-files@29.7.0 from lock file\nnpm error Missing: jest-config@29.7.0 from lock file\nnpm error Missing: jest-haste-map@29.7.0 from lock file\nnpm error Missing: jest-message-util@29.7.0 from lock file\nnpm error Missing: jest-regex-util@29.6.3 from lock file\nnpm error Missing: jest-resolve@29.7.0 from lock file\nnpm error Missing: jest-resolve-dependencies@29.7.0 from lock file\nnpm error Missing: jest-runner@29.7.0 from lock file\nnpm error Missing: jest-runtime@29.7.0 from lock file\nnpm error Missing: jest-snapshot@29.7.0 from lock file\nnpm error Missing: jest-util@29.7.0 from lock file\nnpm error Missing: jest-validate@29.7.0 from lock file\nnpm error Missing: jest-watcher@29.7.0 from lock file\nnpm error Missing: pretty-format@29.7.0 from lock file\nnpm error Missing: @bcoe/v8-coverage@0.2.3 from lock file\nnpm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file\nnpm error Missing: collect-v8-coverage@1.0.2 from lock file\nnpm error Missing: istanbul-lib-coverage@3.2.2 from lock file\nnpm error Missing: istanbul-lib-instrument@6.0.3 from lock file\nnpm error Missing: istanbul-lib-report@3.0.1 from lock file\nnpm error Missing: istanbul-lib-source-maps@4.0.1 from lock file\nnpm error Missing: istanbul-reports@3.1.7 from lock file\nnpm error Missing: jest-worker@29.7.0 from lock file\nnpm error Missing: string-length@4.0.2 from lock file\nnpm error Missing: v8-to-istanbul@9.3.0 from lock file\nnpm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file\nnpm error Missing: @babel/core@7.27.1 from lock file\nnpm error Missing: babel-plugin-istanbul@6.1.1 from lock file\nnpm error Missing: convert-source-map@2.0.0 from lock file\nnpm error Missing: pirates@4.0.7 from lock file\nnpm error Missing: write-file-atomic@4.0.2 from lock file\nnpm error Missing: @ampproject/remapping@2.3.0 from lock file\nnpm error Missing: @babel/code-frame@7.27.1 from lock file\nnpm error Missing: @babel/generator@7.27.1 from lock file\nnpm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file\nnpm error Missing: @babel/helper-module-transforms@7.27.1 from lock file\nnpm error Missing: @babel/helpers@7.27.1 from lock file\nnpm error Missing: @babel/parser@7.27.2 from lock file\nnpm error Missing: @babel/template@7.27.2 from lock file\nnpm error Missing: @babel/traverse@7.27.1 from lock file\nnpm error Missing: @babel/types@7.27.1 from lock file\nnpm error Missing: gensync@1.0.0-beta.2 from lock file\nnpm error Missing: json5@2.2.3 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file\nnpm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file\nnpm error Missing: js-tokens@4.0.0 from lock file\nnpm error Missing: picocolors@1.1.1 from lock file\nnpm error Missing: jsesc@3.1.0 from lock file\nnpm error Missing: @babel/compat-data@7.27.2 from lock file\nnpm error Missing: @babel/helper-validator-option@7.27.1 from lock file\nnpm error Missing: browserslist@4.24.5 from lock file\nnpm error Missing: lru-cache@5.1.1 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @babel/helper-module-imports@7.27.1 from lock file\nnpm error Missing: globals@11.12.0 from lock file\nnpm error Missing: @babel/helper-string-parser@7.27.1 from lock file\nnpm error Missing: @jest/schemas@29.6.3 from lock file\nnpm error Missing: @types/istanbul-reports@3.0.4 from lock file\nnpm error Missing: @types/yargs@17.0.33 from lock file\nnpm error Missing: @sinclair/typebox@0.27.8 from lock file\nnpm error Missing: @jridgewell/set-array@1.2.1 from lock file\nnpm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file\nnpm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file\nnpm error Missing: @types/istanbul-lib-report@3.0.3 from lock file\nnpm error Missing: @types/yargs-parser@21.0.3 from lock file\nnpm error Missing: type-fest@0.21.3 from lock file\nnpm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file\nnpm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file\nnpm error Missing: @istanbuljs/schema@0.1.3 from lock file\nnpm error Missing: istanbul-lib-instrument@5.2.1 from lock file\nnpm error Missing: test-exclude@6.0.0 from lock file\nnpm error Missing: camelcase@5.3.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: get-package-type@0.1.0 from lock file\nnpm error Missing: js-yaml@3.14.1 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: caniuse-lite@1.0.30001718 from lock file\nnpm error Missing: electron-to-chromium@1.5.155 from lock file\nnpm error Missing: node-releases@2.0.19 from lock file\nnpm error Missing: update-browserslist-db@1.1.3 from lock file\nnpm error Missing: pkg-dir@4.2.0 from lock file\nnpm error Missing: resolve-cwd@3.0.0 from lock file\nnpm error Missing: make-dir@4.0.0 from lock file\nnpm error Missing: source-map@0.6.1 from lock file\nnpm error Missing: html-escaper@2.0.2 from lock file\nnpm error Missing: execa@5.1.1 from lock file\nnpm error Missing: get-stream@6.0.1 from lock file\nnpm error Missing: human-signals@2.1.0 from lock file\nnpm error Missing: merge-stream@2.0.0 from lock file\nnpm error Missing: npm-run-path@4.0.1 from lock file\nnpm error Missing: onetime@5.1.2 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: strip-final-newline@2.0.0 from lock file\nnpm error Missing: create-jest@29.7.0 from lock file\nnpm error Missing: prompts@2.4.2 from lock file\nnpm error Missing: @jest/test-sequencer@29.7.0 from lock file\nnpm error Missing: babel-jest@29.7.0 from lock file\nnpm error Missing: deepmerge@4.3.1 from lock file\nnpm error Missing: jest-circus@29.7.0 from lock file\nnpm error Missing: jest-environment-node@29.7.0 from lock file\nnpm error Missing: jest-get-type@29.6.3 from lock file\nnpm error Missing: parse-json@5.2.0 from lock file\nnpm error Missing: @types/babel__core@7.20.5 from lock file\nnpm error Missing: babel-preset-jest@29.6.3 from lock file\nnpm error Missing: @types/babel__generator@7.27.0 from lock file\nnpm error Missing: @types/babel__template@7.4.4 from lock file\nnpm error Missing: @types/babel__traverse@7.20.7 from lock file\nnpm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file\nnpm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file\nnpm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file\nnpm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file\nnpm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file\nnpm error Missing: @jest/environment@29.7.0 from lock file\nnpm error Missing: @jest/expect@29.7.0 from lock file\nnpm error Missing: co@4.6.0 from lock file\nnpm error Missing: dedent@1.6.0 from lock file\nnpm error Missing: is-generator-fn@2.1.0 from lock file\nnpm error Missing: jest-each@29.7.0 from lock file\nnpm error Missing: jest-matcher-utils@29.7.0 from lock file\nnpm error Missing: pure-rand@6.1.0 from lock file\nnpm error Missing: stack-utils@2.0.6 from lock file\nnpm error Missing: @jest/fake-timers@29.7.0 from lock file\nnpm error Missing: jest-mock@29.7.0 from lock file\nnpm error Missing: expect@29.7.0 from lock file\nnpm error Missing: @sinonjs/fake-timers@10.3.0 from lock file\nnpm error Missing: @sinonjs/commons@3.0.1 from lock file\nnpm error Missing: type-detect@4.0.8 from lock file\nnpm error Missing: @jest/expect-utils@29.7.0 from lock file\nnpm error Missing: @types/graceful-fs@4.1.9 from lock file\nnpm error Missing: anymatch@3.1.3 from lock file\nnpm error Missing: fb-watchman@2.0.2 from lock file\nnpm error Missing: fsevents@2.3.3 from lock file\nnpm error Missing: walker@1.0.8 from lock file\nnpm error Missing: normalize-path@3.0.0 from lock file\nnpm error Missing: bser@2.1.1 from lock file\nnpm error Missing: node-int64@0.4.0 from lock file\nnpm error Missing: jest-diff@29.7.0 from lock file\nnpm error Missing: diff-sequences@29.6.3 from lock file\nnpm error Missing: @types/stack-utils@2.0.3 from lock file\nnpm error Missing: jest-pnp-resolver@1.2.3 from lock file\nnpm error Missing: resolve.exports@2.0.3 from lock file\nnpm error Missing: emittery@0.13.1 from lock file\nnpm error Missing: jest-docblock@29.7.0 from lock file\nnpm error Missing: jest-leak-detector@29.7.0 from lock file\nnpm error Missing: source-map-support@0.5.13 from lock file\nnpm error Missing: detect-newline@3.1.0 from lock file\nnpm error Missing: @jest/globals@29.7.0 from lock file\nnpm error Missing: @jest/source-map@29.6.3 from lock file\nnpm error Missing: cjs-module-lexer@1.4.3 from lock file\nnpm error Missing: strip-bom@4.0.0 from lock file\nnpm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: leven@3.1.0 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: mimic-fn@2.1.0 from lock file\nnpm error Missing: error-ex@1.3.2 from lock file\nnpm error Missing: json-parse-even-better-errors@2.3.1 from lock file\nnpm error Missing: lines-and-columns@1.2.4 from lock file\nnpm error Missing: is-arrayish@0.2.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: ansi-styles@5.2.0 from lock file\nnpm error Missing: react-is@18.3.1 from lock file\nnpm error Missing: kleur@3.0.3 from lock file\nnpm error Missing: sisteransi@1.0.5 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: buffer-from@1.1.2 from lock file\nnpm error Missing: escape-string-regexp@2.0.0 from lock file\nnpm error Missing: char-regex@1.0.2 from lock file\nnpm error Missing: makeerror@1.0.12 from lock file\nnpm error Missing: tmpl@1.0.5 from lock file\nnpm error Missing: yallist@3.1.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: argparse@1.0.10 from lock file\nnpm error Missing: esprima@4.0.1 from lock file\nnpm error Missing: sprintf-js@1.0.3 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error Missing: p-try@2.2.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_24_07_873Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504.",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: jest@29.7.0 from lock file\nnpm error Missing: @jest/core@29.7.0 from lock file\nnpm error Missing: @jest/types@29.6.3 from lock file\nnpm error Missing: import-local@3.2.0 from lock file\nnpm error Missing: jest-cli@29.7.0 from lock file\nnpm error Missing: @jest/console@29.7.0 from lock file\nnpm error Missing: @jest/reporters@29.7.0 from lock file\nnpm error Missing: @jest/test-result@29.7.0 from lock file\nnpm error Missing: @jest/transform@29.7.0 from lock file\nnpm error Missing: ansi-escapes@4.3.2 from lock file\nnpm error Missing: ci-info@3.9.0 from lock file\nnpm error Missing: exit@0.1.2 from lock file\nnpm error Missing: graceful-fs@4.2.11 from lock file\nnpm error Missing: jest-changed-files@29.7.0 from lock file\nnpm error Missing: jest-config@29.7.0 from lock file\nnpm error Missing: jest-haste-map@29.7.0 from lock file\nnpm error Missing: jest-message-util@29.7.0 from lock file\nnpm error Missing: jest-regex-util@29.6.3 from lock file\nnpm error Missing: jest-resolve@29.7.0 from lock file\nnpm error Missing: jest-resolve-dependencies@29.7.0 from lock file\nnpm error Missing: jest-runner@29.7.0 from lock file\nnpm error Missing: jest-runtime@29.7.0 from lock file\nnpm error Missing: jest-snapshot@29.7.0 from lock file\nnpm error Missing: jest-util@29.7.0 from lock file\nnpm error Missing: jest-validate@29.7.0 from lock file\nnpm error Missing: jest-watcher@29.7.0 from lock file\nnpm error Missing: pretty-format@29.7.0 from lock file\nnpm error Missing: @bcoe/v8-coverage@0.2.3 from lock file\nnpm error Missing: @jridgewell/trace-mapping@0.3.25 from lock file\nnpm error Missing: collect-v8-coverage@1.0.2 from lock file\nnpm error Missing: istanbul-lib-coverage@3.2.2 from lock file\nnpm error Missing: istanbul-lib-instrument@6.0.3 from lock file\nnpm error Missing: istanbul-lib-report@3.0.1 from lock file\nnpm error Missing: istanbul-lib-source-maps@4.0.1 from lock file\nnpm error Missing: istanbul-reports@3.1.7 from lock file\nnpm error Missing: jest-worker@29.7.0 from lock file\nnpm error Missing: string-length@4.0.2 from lock file\nnpm error Missing: v8-to-istanbul@9.3.0 from lock file\nnpm error Missing: @types/istanbul-lib-coverage@2.0.6 from lock file\nnpm error Missing: @babel/core@7.27.1 from lock file\nnpm error Missing: babel-plugin-istanbul@6.1.1 from lock file\nnpm error Missing: convert-source-map@2.0.0 from lock file\nnpm error Missing: pirates@4.0.7 from lock file\nnpm error Missing: write-file-atomic@4.0.2 from lock file\nnpm error Missing: @ampproject/remapping@2.3.0 from lock file\nnpm error Missing: @babel/code-frame@7.27.1 from lock file\nnpm error Missing: @babel/generator@7.27.1 from lock file\nnpm error Missing: @babel/helper-compilation-targets@7.27.2 from lock file\nnpm error Missing: @babel/helper-module-transforms@7.27.1 from lock file\nnpm error Missing: @babel/helpers@7.27.1 from lock file\nnpm error Missing: @babel/parser@7.27.2 from lock file\nnpm error Missing: @babel/template@7.27.2 from lock file\nnpm error Missing: @babel/traverse@7.27.1 from lock file\nnpm error Missing: @babel/types@7.27.1 from lock file\nnpm error Missing: gensync@1.0.0-beta.2 from lock file\nnpm error Missing: json5@2.2.3 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @jridgewell/gen-mapping@0.3.8 from lock file\nnpm error Missing: @babel/helper-validator-identifier@7.27.1 from lock file\nnpm error Missing: js-tokens@4.0.0 from lock file\nnpm error Missing: picocolors@1.1.1 from lock file\nnpm error Missing: jsesc@3.1.0 from lock file\nnpm error Missing: @babel/compat-data@7.27.2 from lock file\nnpm error Missing: @babel/helper-validator-option@7.27.1 from lock file\nnpm error Missing: browserslist@4.24.5 from lock file\nnpm error Missing: lru-cache@5.1.1 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: @babel/helper-module-imports@7.27.1 from lock file\nnpm error Missing: globals@11.12.0 from lock file\nnpm error Missing: @babel/helper-string-parser@7.27.1 from lock file\nnpm error Missing: @jest/schemas@29.6.3 from lock file\nnpm error Missing: @types/istanbul-reports@3.0.4 from lock file\nnpm error Missing: @types/yargs@17.0.33 from lock file\nnpm error Missing: @sinclair/typebox@0.27.8 from lock file\nnpm error Missing: @jridgewell/set-array@1.2.1 from lock file\nnpm error Missing: @jridgewell/sourcemap-codec@1.5.0 from lock file\nnpm error Missing: @jridgewell/resolve-uri@3.1.2 from lock file\nnpm error Missing: @types/istanbul-lib-report@3.0.3 from lock file\nnpm error Missing: @types/yargs-parser@21.0.3 from lock file\nnpm error Missing: type-fest@0.21.3 from lock file\nnpm error Missing: @babel/helper-plugin-utils@7.27.1 from lock file\nnpm error Missing: @istanbuljs/load-nyc-config@1.1.0 from lock file\nnpm error Missing: @istanbuljs/schema@0.1.3 from lock file\nnpm error Missing: istanbul-lib-instrument@5.2.1 from lock file\nnpm error Missing: test-exclude@6.0.0 from lock file\nnpm error Missing: camelcase@5.3.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: get-package-type@0.1.0 from lock file\nnpm error Missing: js-yaml@3.14.1 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: caniuse-lite@1.0.30001718 from lock file\nnpm error Missing: electron-to-chromium@1.5.155 from lock file\nnpm error Missing: node-releases@2.0.19 from lock file\nnpm error Missing: update-browserslist-db@1.1.3 from lock file\nnpm error Missing: pkg-dir@4.2.0 from lock file\nnpm error Missing: resolve-cwd@3.0.0 from lock file\nnpm error Missing: make-dir@4.0.0 from lock file\nnpm error Missing: source-map@0.6.1 from lock file\nnpm error Missing: html-escaper@2.0.2 from lock file\nnpm error Missing: execa@5.1.1 from lock file\nnpm error Missing: get-stream@6.0.1 from lock file\nnpm error Missing: human-signals@2.1.0 from lock file\nnpm error Missing: merge-stream@2.0.0 from lock file\nnpm error Missing: npm-run-path@4.0.1 from lock file\nnpm error Missing: onetime@5.1.2 from lock file\nnpm error Missing: signal-exit@3.0.7 from lock file\nnpm error Missing: strip-final-newline@2.0.0 from lock file\nnpm error Missing: create-jest@29.7.0 from lock file\nnpm error Missing: prompts@2.4.2 from lock file\nnpm error Missing: @jest/test-sequencer@29.7.0 from lock file\nnpm error Missing: babel-jest@29.7.0 from lock file\nnpm error Missing: deepmerge@4.3.1 from lock file\nnpm error Missing: jest-circus@29.7.0 from lock file\nnpm error Missing: jest-environment-node@29.7.0 from lock file\nnpm error Missing: jest-get-type@29.6.3 from lock file\nnpm error Missing: parse-json@5.2.0 from lock file\nnpm error Missing: @types/babel__core@7.20.5 from lock file\nnpm error Missing: babel-preset-jest@29.6.3 from lock file\nnpm error Missing: @types/babel__generator@7.27.0 from lock file\nnpm error Missing: @types/babel__template@7.4.4 from lock file\nnpm error Missing: @types/babel__traverse@7.20.7 from lock file\nnpm error Missing: babel-plugin-jest-hoist@29.6.3 from lock file\nnpm error Missing: babel-preset-current-node-syntax@1.1.0 from lock file\nnpm error Missing: @babel/plugin-syntax-async-generators@7.8.4 from lock file\nnpm error Missing: @babel/plugin-syntax-bigint@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-class-properties@7.12.13 from lock file\nnpm error Missing: @babel/plugin-syntax-class-static-block@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-import-attributes@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-import-meta@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-json-strings@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-logical-assignment-operators@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-nullish-coalescing-operator@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-numeric-separator@7.10.4 from lock file\nnpm error Missing: @babel/plugin-syntax-object-rest-spread@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-catch-binding@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-optional-chaining@7.8.3 from lock file\nnpm error Missing: @babel/plugin-syntax-private-property-in-object@7.14.5 from lock file\nnpm error Missing: @babel/plugin-syntax-top-level-await@7.14.5 from lock file\nnpm error Missing: @jest/environment@29.7.0 from lock file\nnpm error Missing: @jest/expect@29.7.0 from lock file\nnpm error Missing: co@4.6.0 from lock file\nnpm error Missing: dedent@1.6.0 from lock file\nnpm error Missing: is-generator-fn@2.1.0 from lock file\nnpm error Missing: jest-each@29.7.0 from lock file\nnpm error Missing: jest-matcher-utils@29.7.0 from lock file\nnpm error Missing: pure-rand@6.1.0 from lock file\nnpm error Missing: stack-utils@2.0.6 from lock file\nnpm error Missing: @jest/fake-timers@29.7.0 from lock file\nnpm error Missing: jest-mock@29.7.0 from lock file\nnpm error Missing: expect@29.7.0 from lock file\nnpm error Missing: @sinonjs/fake-timers@10.3.0 from lock file\nnpm error Missing: @sinonjs/commons@3.0.1 from lock file\nnpm error Missing: type-detect@4.0.8 from lock file\nnpm error Missing: @jest/expect-utils@29.7.0 from lock file\nnpm error Missing: @types/graceful-fs@4.1.9 from lock file\nnpm error Missing: anymatch@3.1.3 from lock file\nnpm error Missing: fb-watchman@2.0.2 from lock file\nnpm error Missing: fsevents@2.3.3 from lock file\nnpm error Missing: walker@1.0.8 from lock file\nnpm error Missing: normalize-path@3.0.0 from lock file\nnpm error Missing: bser@2.1.1 from lock file\nnpm error Missing: node-int64@0.4.0 from lock file\nnpm error Missing: jest-diff@29.7.0 from lock file\nnpm error Missing: diff-sequences@29.6.3 from lock file\nnpm error Missing: @types/stack-utils@2.0.3 from lock file\nnpm error Missing: jest-pnp-resolver@1.2.3 from lock file\nnpm error Missing: resolve.exports@2.0.3 from lock file\nnpm error Missing: emittery@0.13.1 from lock file\nnpm error Missing: jest-docblock@29.7.0 from lock file\nnpm error Missing: jest-leak-detector@29.7.0 from lock file\nnpm error Missing: source-map-support@0.5.13 from lock file\nnpm error Missing: detect-newline@3.1.0 from lock file\nnpm error Missing: @jest/globals@29.7.0 from lock file\nnpm error Missing: @jest/source-map@29.6.3 from lock file\nnpm error Missing: cjs-module-lexer@1.4.3 from lock file\nnpm error Missing: strip-bom@4.0.0 from lock file\nnpm error Missing: @babel/plugin-syntax-jsx@7.27.1 from lock file\nnpm error Missing: @babel/plugin-syntax-typescript@7.27.1 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: leven@3.1.0 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: mimic-fn@2.1.0 from lock file\nnpm error Missing: error-ex@1.3.2 from lock file\nnpm error Missing: json-parse-even-better-errors@2.3.1 from lock file\nnpm error Missing: lines-and-columns@1.2.4 from lock file\nnpm error Missing: is-arrayish@0.2.1 from lock file\nnpm error Missing: find-up@4.1.0 from lock file\nnpm error Missing: ansi-styles@5.2.0 from lock file\nnpm error Missing: react-is@18.3.1 from lock file\nnpm error Missing: kleur@3.0.3 from lock file\nnpm error Missing: sisteransi@1.0.5 from lock file\nnpm error Missing: resolve-from@5.0.0 from lock file\nnpm error Missing: buffer-from@1.1.2 from lock file\nnpm error Missing: escape-string-regexp@2.0.0 from lock file\nnpm error Missing: char-regex@1.0.2 from lock file\nnpm error Missing: makeerror@1.0.12 from lock file\nnpm error Missing: tmpl@1.0.5 from lock file\nnpm error Missing: yallist@3.1.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: argparse@1.0.10 from lock file\nnpm error Missing: esprima@4.0.1 from lock file\nnpm error Missing: sprintf-js@1.0.3 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error Missing: p-try@2.2.0 from lock file\nnpm error Missing: semver@6.3.1 from lock file\nnpm error Missing: locate-path@5.0.0 from lock file\nnpm error Missing: p-locate@4.1.0 from lock file\nnpm error Missing: p-limit@2.3.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-05-20T03_24_07_873Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/66e0279c-1d46-4604-a24d-0c8b2be82414?project=831418024504."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-05-20T03:24:42.991Z] Error: Failed to update function trackWebhookEvents in region us-central1
    at C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:399:19
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Fabricator.updateV2Function (C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:388:32)
    at async Fabricator.updateEndpoint (C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:13)
    at async handle (C:\Users\lakma\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
